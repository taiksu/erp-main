import{d as l,j as U,i as D,c as R,o as c,w as B,b as h,a as e,u as I,Z as N,t as n,e as v,f as C,g as u,m as g,v as x,F as O,h as T,k as H}from"./app-vGR4VHCP.js";import{L as P}from"./LayoutFranqueado-Dg4kLBEk.js";import{_ as Q}from"./CalendarSimples2-I5OwyRRx.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CqG6kpIn.js";import"./pt-br-D1Z5XoE6.js";const z={class:"flex justify-between items-center mb-4"},K={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Z={class:"flex items-center space-x-2"},G={class:"text-gray-900 text-[17px] font-semibold"},J={class:"mt-5"},W={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},X={class:"bg-white rounded-lg p-7"},Y={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},ee={class:"bg-white rounded-lg p-7"},te={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},se={class:"bg-white rounded-lg p-7"},ae={class:"text-[#262a27] text-[40px] sm:text-[30px] md:text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},oe={class:"mt-8"},le={class:"bg-white rounded-lg shadow"},re={class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},ne={key:0,class:"grid grid-cols-5 gap-4 py-2 px-6 bg-gray-50"},ie={class:"space-y-1"},de={class:"flex items-center text-gray-900 font-semibold"},ue=["src"],pe={class:"text-gray-900 font-semibold"},ce={class:"text-gray-900 font-medium"},ge={class:"text-gray-600 font-semibold"},xe={class:"text-gray-500 font-semibold"},me={key:1,class:"text-center mt-4"},ve={__name:"Index",setup(fe){const k=l("0,00"),V=l("0,00"),b=l("0,00"),L=l("0,00"),_=l("0,00"),y=l("0,00"),w=l([]),M=l(!1),$=l(null),i=l(null),m=l(!0),f=l(!1),a=l({operacao:"",quantidade:"",quando:"",item:"",responsavel:""}),F={Entrada:{icon:"/storage/images/arrow_back_verde.svg",label:"Entrada"},Retirada:{icon:"/storage/images/arrow_back_red.svg",label:"Retirada"},Ajuste:{icon:"/storage/images/icon_ajustes.svg",label:"Ajuste"}},j=U(()=>w.value.filter(o=>(a.value.operacao===""||o.operacao.toLowerCase().includes(a.value.operacao.toLowerCase()))&&(a.value.quantidade===""||String(o.quantidade).includes(a.value.quantidade))&&(a.value.item===""||o.item.toLowerCase().includes(a.value.item.toLowerCase()))&&(a.value.responsavel===""||o.responsavel.toLowerCase().includes(a.value.responsavel.toLowerCase()))&&(a.value.quando===""||o.data.toLowerCase().includes(a.value.quando.toLowerCase()))).sort((o,t)=>i.value?m.value?o[i.value]>t[i.value]?1:-1:o[i.value]<t[i.value]?1:-1:0)),p=o=>{i.value===o?m.value=!m.value:(i.value=o,m.value=!0)},E=()=>{f.value=!f.value},A=o=>{console.log("Filtros atualizados:",o),q(o.startDate,o.endDate)},q=async(o=null,t=null)=>{try{let s="/api/estoque/incial";const d=[];o&&d.push(`start_date=${o}`),t&&d.push(`end_date=${t}`),d.length>0&&(s+=`?${d.join("&")}`);const r=(await H.get(s)).data;r.saldo_estoque_inicial?(w.value=Array.isArray(r.historicoMovimentacoes)?r.historicoMovimentacoes:Object.values(r.historicoMovimentacoes),k.value=r.start_date||"não informado",V.value=r.end_date||"não informado",b.value=r.saldo_estoque_inicial||"0,00",L.value=r.entradas_durante_periodo||"0,00",_.value=r.saldo_estoque_final||"0,00",y.value=r.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(s){console.error("Erro ao buscar dados analíticos:",s)}};return D(()=>{q()}),(o,t)=>(c(),R(P,null,{default:B(()=>[h(I(N),{title:"Controle de estoque"}),e("div",z,[t[11]||(t[11]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de estoque "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",K,[e("div",Z,[t[10]||(t[10]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",G,[h(Q,{onUpdateFilters:A})])])])]),e("div",J,[e("div",W,[e("div",X,[t[12]||(t[12]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Valor inicial ",-1)),e("div",Y," R$ "+n(b.value),1)]),e("div",ee,[t[13]||(t[13]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," Estoque atual ",-1)),e("div",te," R$ "+n(_.value),1)]),e("div",se,[t[14]||(t[14]=e("h3",{class:"text-lg sm:text-xl md:text-lg font-semibold text-gray-500"}," CMV ",-1)),e("div",ae,n(y.value),1)])])]),e("div",oe,[e("div",{class:"flex items-center justify-between mb-4"},[t[16]||(t[16]=e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),e("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:E},t[15]||(t[15]=[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),e("div",le,[e("div",re,[e("span",{onClick:t[0]||(t[0]=s=>p("operacao")),class:"px-5 cursor-pointer flex items-center gap-2"},t[17]||(t[17]=[u(" OPERAÇÃO "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[1]||(t[1]=s=>p("quantidade")),class:"flex items-center gap-2 cursor-pointer"},t[18]||(t[18]=[u(" QTD. "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[2]||(t[2]=s=>p("item")),class:"cursor-pointer flex items-center gap-2"},t[19]||(t[19]=[u(" Item "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px] cursor-pointer"},null,-1)])),e("span",{onClick:t[3]||(t[3]=s=>p("quanto")),class:"cursor-pointer flex items-center gap-2"},t[20]||(t[20]=[u(" Quando "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:t[4]||(t[4]=s=>p("responsavel")),class:"cursor-pointer flex items-center gap-2"},t[21]||(t[21]=[u(" Responsável "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),f.value?(c(),v("div",ne,[g(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.operacao=s),type:"text",placeholder:"Filtrar por operação",class:"p-2 border border-gray-300 rounded"},null,512),[[x,a.value.operacao]]),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.quantidade=s),type:"text",placeholder:"Filtrar por qtd.",class:"p-2 border border-gray-300 rounded"},null,512),[[x,a.value.quantidade]]),g(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.item=s),type:"text",placeholder:"Filtrar por item",class:"p-2 border border-gray-300 rounded"},null,512),[[x,a.value.item]]),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.quando=s),type:"text",placeholder:"Filtrar por quando",class:"p-2 border border-gray-300 rounded"},null,512),[[x,a.value.quando]]),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.responsavel=s),type:"text",placeholder:"Filtrar por responsável",class:"p-2 border border-gray-300 rounded"},null,512),[[x,a.value.responsavel]])])):C("",!0),e("div",{ref_key:"scrollContainer",ref:$,class:"overflow-y-auto max-h-96 scroll-hidden"},[e("ul",ie,[(c(!0),v(O,null,T(j.value,(s,d)=>(c(),v("li",{key:d,class:"hover:bg-gray-200 grid grid-cols-5 gap-1 px-6 py-2 text-[16px]"},[e("span",de,[e("img",{src:F[s.operacao].icon,alt:"icon indicativo",class:"mr-3 w-5 h-5"},null,8,ue),u(" "+n(F[s.operacao].label),1)]),e("span",pe,n(s.quantidade)+" "+n(s.unidade==="unidade"?"uni":"kg"),1),e("span",ce,n(s.item),1),e("span",ge,n(s.data),1),e("span",xe,n(s.responsavel),1)]))),128))])],512),M.value?(c(),v("div",me,"Carregando...")):C("",!0)])])]),_:1}))}},Ce=S(ve,[["__scopeId","data-v-fdcbad0b"]]);export{Ce as default};
