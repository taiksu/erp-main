import{A as Z}from"./LayoutFranqueadora-DZJsUdwc.js";import{d as o,i as H,j as J,e as i,o as t,f as k,a as e,F as I,h as R,n as W,t as P,k as B,l as N,b,m as S,p as A,x as G,v as K,q as Y,c as L,w as ee,u as oe,Z as te}from"./app-vGR4VHCP.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as O}from"./LabelModel-BQtPKLWR.js";import{D as ae}from"./Deslizante-DHmCuj6D.js";import{B as se}from"./ButtonEditeMedio-BwSG8MHL.js";import{B as q}from"./ButtonPrimaryMedio-C9HfT39S.js";import{B as Q}from"./ButtonCancelar-DXabxgHh.js";import{C as X}from"./ConfirmDialog-1acut7He.js";import"./user-BrYGJ_Un.js";/* empty css                                                                   */const le={key:0,class:"loading-overlay"},ne={class:"card-container"},ie=["onClick"],re={class:"card-inner"},de={class:"icon-container"},ce={class:"icon-leaf"},ue=["src"],me={class:"text-container"},ve={class:"city"},fe={__name:"ListarMetodosPagamentos",emits:["dado-selecionado"],setup(F,{emit:C}){const f=C,l=o([]),h=o(""),r=o(!1),n=async()=>{r.value=!0;try{const c=await B.get("/api/admin-metodos-pagamentos/lista");l.value=Object.values(c.data)}catch(c){console.error("Erro ao carregar os dados:",c)}finally{r.value=!1}},d=c=>c?new URL(c,window.location.origin).href:"/storage/images/no_imagem.svg";H(n);const y=c=>{f("dado-selecionado",c)},g=J(()=>{const c=h.value.toLowerCase();return l.value.filter(a=>String(a.id).toLowerCase().includes(c)||a.fornecedor_nome.toLowerCase().includes(c))});return(c,a)=>(t(),i("div",null,[r.value?(t(),i("div",le,a[0]||(a[0]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),a[3]||(a[3]=e("div",{class:"painel-title"},"Métodos de pagamento",-1)),a[4]||(a[4]=e("div",{class:"painel-subtitle"},[e("p",null,"Gerencie suas formas de pagamento para o fluxo de caixa")],-1)),e("div",ne,[(t(!0),i(I,null,R(g.value,u=>(t(),i("div",{key:u.id,class:W(["card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",{"bg-gray-300":!u.status}]),onClick:M=>y(u)},[e("div",re,[e("div",de,[a[1]||(a[1]=e("div",{class:"icon-bg"},null,-1)),e("div",ce,[e("img",{src:d(u.img_icon),alt:"Ícone"},null,8,ue)])]),e("div",me,[e("div",ve,P(u.nome),1)]),a[2]||(a[2]=e("div",{class:"action-icon"},null,-1))])],10,ie))),128))])]))}},pe=T(fe,[["__scopeId","data-v-43ad4f7e"]]),ge={key:0,class:"loading-overlay"},_e={class:"mt-5"},xe={class:"bg-white rounded-lg p-12"},be={class:"flex gap-8 mb-8"},he={class:"flex flex-col items-center"},ye={class:"relative group"},we=["src"],Ce={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},ke={class:"flex flex-col flex-1"},$e=["value"],De={key:0,class:"text-red-500 text-sm"},Fe={class:"form-buttons"},Me={__name:"EditarMetodoPagamento",props:{metodo:{type:Object,default:null}},emits:["voltar"],setup(F,{emit:C}){const f=F,l=N(),h=C,r=o(f.metodo.id),n=o(f.metodo.nome),d=o(f.metodo.tipo),y=o(f.metodo.img_icon||""),g=o(null),c=o(""),a=o(null),u=o(!1),M=o(!1),$=o({}),U=["credito","debito","especie","cabal","alelo","pix","ticket","drex","pagamento_online","vr_alimentacao"],j=p=>p?new URL(p,window.location.origin).href:"/storage/images/no_imagem.svg",E=async()=>{if($.value={},n.value||($.value.nome="O nome é obrigatório"),d.value||($.value.selectedTipo="O tipo é obrigatório"),!y.value&&!g.value&&($.value.selectedFile="O ícone é obrigatório"),Object.keys($.value).length===0)try{u.value=!0;const p=new FormData;p.append("id",r.value),p.append("nome",n.value),p.append("tipo",d.value),g.value&&p.append("profile_photo",g.value);const x=await B.post("/api/admin-metodos-pagamentos/atualizar",p,{headers:{"Content-Type":"multipart/form-data"}});l.success("Método de pagamento atualizado com sucesso!"),w()}catch(p){l.error("Erro ao atualizar método de pagamento"),console.error("Erro ao atualizar método de pagamento:",p)}finally{u.value=!1}},_=p=>{c.value=p,M.value=!0},m=()=>{E(),M.value=!1},z=()=>{M.value=!1},V=()=>{var p;(p=a.value)==null||p.click()},s=()=>{y.value="",g.value=null,l.info("Imagem removida.")},v=p=>{const x=p.target.files[0];if(x){g.value=x;const D=new FileReader;D.onload=()=>{y.value=D.result,l.success("Imagem carregada com sucesso!")},D.readAsDataURL(x)}},w=()=>{n.value="",U.value="",y.value="",g.value=null,$.value={},h("voltar")};return(p,x)=>(t(),i(I,null,[u.value?(t(),i("div",ge,x[4]||(x[4]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",_e,[e("div",xe,[e("div",be,[e("div",he,[e("div",ye,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden",onClick:V},[y.value?(t(),i(I,{key:0},[e("img",{src:j(y.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,we),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:x[0]||(x[0]=A(()=>{},["stop"]))},[e("button",{onClick:A(s,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),i("img",Ce))]),e("input",{type:"file",ref_key:"fileInput",ref:a,accept:"image/*",class:"hidden",onChange:v},null,544)])]),e("div",ke,[b(O,{text:"Tipo",class:"mb-2"}),S(e("select",{"onUpdate:modelValue":x[1]||(x[1]=D=>d.value=D),class:"w-72 h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[x[5]||(x[5]=e("option",{value:"",disabled:"",selected:""},"Selecione um tipo",-1)),(t(),i(I,null,R(U,D=>e("option",{key:D,value:D,class:"text-base font-semibold"},P(D),9,$e)),64))],512),[[G,d.value]])])]),b(O,{text:"Nome do método"}),S(e("input",{id:"nome","onUpdate:modelValue":x[2]||(x[2]=D=>n.value=D),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"nome do método"},null,512),[[K,n.value]]),$.value.nome?(t(),i("span",De,P($.value.nome),1)):k("",!0),e("div",Fe,[b(Q,{class:"w-full",text:"Cancelar",onClick:w}),b(q,{text:"Atualizar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:x[3]||(x[3]=D=>_("Atualizar método de pagamento?"))})])])]),b(X,{isVisible:M.value,motivo:c.value,onConfirm:m,onCancel:z},null,8,["isVisible","motivo"])],64))}},ze=T(Me,[["__scopeId","data-v-67243ac3"]]),Ie={class:"elemento-fixo"},Ve={key:0},Pe={key:0,class:"loading-overlay"},Ue={class:"w-full h-[100px] p-8 bg-white rounded-[20px] flex flex-col justify-center gap-6"},je={class:"flex items-center gap-4 w-full"},Ee=["src"],Le={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},Be={class:"ml-auto flex items-center"},Oe={class:"mt-4 w-full p-8 bg-white rounded-[20px] flex justify-between items-center gap-5"},Te={class:"flex flex-col w-2/3"},Se={class:"text-sm font-semibold text-gray-700"},Ae={class:"w-1/2 flex justify-end"},Re={key:1,class:"mt-4"},Ne={__name:"DetalhesMetodosPagamento",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(F,{emit:C}){const f=N(),l=F,h=C,r=o(!1),n=o(!1),d=o(!1),y=o(""),g=o(!!l.dados.status);Y(()=>l.dados.status,_=>{g.value=!!_});const c=_=>{y.value=_,d.value=!0},a=()=>{E(),d.value=!1},u=()=>{d.value=!1},M=()=>{r.value=!1,h("atualizar")},$=()=>{r.value=!r.value},U=_=>_?new URL(_,window.location.origin).href:"/storage/images/no_imagem.svg",j=async _=>{try{n.value=!0;const m={default_payment_method_id:l.dados.id,status:_?1:0};await B.post("/api/admin-metodos-pagamentos/alternar-status",m),g.value=_,f.success("Método atualizado"),h("atualizar")}catch(m){console.error("Erro ao atualizar o método de pagamento:",m)}finally{n.value=!1}},E=async()=>{var _,m,z,V;try{n.value=!0;const s=await B.delete(`/api/admin-metodos-pagamentos/excluir/${l.dados.id}`);console.log(s.data.message),f.success("Método deletado com sucesso!"),h("atualizar")}catch(s){f.error("Erro ao deletar o método:",((m=(_=s.response)==null?void 0:_.data)==null?void 0:m.error)||s.message),console.error("Erro ao deletar o método:",((V=(z=s.response)==null?void 0:z.data)==null?void 0:V.error)||s.message)}finally{n.value=!1}};return(_,m)=>(t(),i("div",Ie,[r.value?k("",!0):(t(),i("div",Ve,[n.value?(t(),i("div",Pe,m[2]||(m[2]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",Ue,[e("div",je,[e("img",{src:U(F.dados.img_icon),alt:"Ícone",class:"w-[50px] h-[50px]"},null,8,Ee),e("div",Le,P(F.dados.nome),1),e("div",Be,[b(X,{isVisible:d.value,motivo:y.value,onConfirm:a,onCancel:u},null,8,["isVisible","motivo"]),e("div",{class:"cursor-pointer",onClick:m[0]||(m[0]=z=>c("Excluir esse método?"))},m[3]||(m[3]=[e("img",{src:"/storage/images/delete.svg",alt:"Deletar Usuário",class:"w-6 h-6"},null,-1)]))])])]),e("div",Oe,[e("div",Te,[b(O,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),e("span",Se,P(g.value?"Ativado":"Desativado"),1)]),e("div",Ae,[b(ae,{status:g.value,"onUpdate:status":m[1]||(m[1]=z=>g.value=z),onClick:j},null,8,["status"])])])])),F.dados.id&&!r.value?(t(),i("div",Re,[b(se,{text:"Editar método","icon-path":"/storage/images/border_color.svg",onClick:$,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):k("",!0),r.value?(t(),L(ze,{key:2,metodo:F.dados,isVisible:r.value,onVoltar:M},null,8,["metodo","isVisible"])):k("",!0)]))}},qe=T(Ne,[["__scopeId","data-v-1cab5a54"]]),Xe={key:0,class:"loading-overlay"},Ge={class:"mt-5"},Ke={class:"bg-white rounded-lg p-12"},Qe={class:"flex gap-8 mb-8"},Ze={class:"flex flex-col items-center"},He={class:"relative group"},Je=["src"],We={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Ye={class:"flex flex-col flex-1"},eo=["value"],oo={key:0,class:"text-red-500 text-sm"},to={class:"form-buttons"},ao={__name:"CadastroMetodoPagamento",emits:["voltar"],setup(F,{emit:C}){const f=N(),l=C,h=o(""),r=o(""),n=o(""),d=o(null),y=o(""),g=o(null),c=o(!1),a=o(!1),u=o({}),M=["credito","debito","especie","cabal","alelo","pix","ticket","drex","pagamento_online","vr_alimentacao"],$=async()=>{if(u.value={},h.value||(u.value.nome="O nome é obrigatório"),r.value||(u.value.selectedTipo="O tipo é obrigatório"),!n.value&&!d.value&&(u.value.selectedFile="O ícone é obrigatório"),Object.keys(u.value).length===0)try{c.value=!0;const s=new FormData;s.append("nome",h.value),s.append("tipo",r.value),d.value&&s.append("profile_photo",d.value);const v=await B.post("/api/admin-metodos-pagamentos/cadastrar",s,{headers:{"Content-Type":"multipart/form-data"}});f.success("Método de pagamento atualizado com sucesso!"),V()}catch(s){f.error("Erro ao atualizar método de pagamento"),console.error("Erro ao atualizar método de pagamento:",s)}finally{c.value=!1}},U=s=>{y.value=s,a.value=!0},j=()=>{$(),a.value=!1},E=()=>{a.value=!1},_=()=>{var s;(s=g.value)==null||s.click()},m=()=>{n.value="",d.value=null,f.info("Imagem removida.")},z=s=>{const v=s.target.files[0];if(v){d.value=v;const w=new FileReader;w.onload=()=>{n.value=w.result,f.success("Imagem carregada com sucesso!")},w.readAsDataURL(v)}},V=()=>{h.value="",M.value="",n.value="",d.value=null,u.value={},l("voltar")};return(s,v)=>(t(),i(I,null,[c.value?(t(),i("div",Xe,v[4]||(v[4]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",Ge,[e("div",Ke,[e("div",Qe,[e("div",Ze,[e("div",He,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden",onClick:_},[n.value?(t(),i(I,{key:0},[e("img",{src:n.value,alt:"Imagem selecionada",class:"w-full h-full object-cover p-3"},null,8,Je),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:v[0]||(v[0]=A(()=>{},["stop"]))},[e("button",{onClick:A(m,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),i("img",We))]),e("input",{type:"file",ref_key:"fileInput",ref:g,accept:"image/*",class:"hidden",onChange:z},null,544)])]),e("div",Ye,[b(O,{text:"Tipo",class:"mb-2"}),S(e("select",{"onUpdate:modelValue":v[1]||(v[1]=w=>r.value=w),class:"w-72 h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[v[5]||(v[5]=e("option",{value:"",disabled:"",selected:""},"Selecione um tipo",-1)),(t(),i(I,null,R(M,w=>e("option",{key:w,value:w,class:"text-base font-semibold"},P(w),9,eo)),64))],512),[[G,r.value]])])]),b(O,{text:"Nome do método"}),S(e("input",{id:"nome","onUpdate:modelValue":v[2]||(v[2]=w=>h.value=w),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"Nome do método de pagamento"},null,512),[[K,h.value]]),u.value.nome?(t(),i("span",oo,P(u.value.nome),1)):k("",!0),e("div",to,[b(Q,{class:"w-full",text:"Cancelar",onClick:V}),b(q,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:v[3]||(v[3]=w=>U("Cadastar método de pagamento?"))})])])]),b(X,{isVisible:a.value,motivo:y.value,onConfirm:j,onCancel:E},null,8,["isVisible","motivo"])],64))}},so=T(ao,[["__scopeId","data-v-53a04703"]]),lo={key:0,class:"fixed bottom-6 right-6"},no={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},io={class:"flex flex-col gap-4"},ro={__name:"Index",setup(F){const C=o(null),f=o(0),l=o(!1),h=d=>{C.value=d},r=()=>{f.value+=1,C.value=null,l.value=!1},n=()=>{l.value=!l.value,l.value&&(C.value=null)};return(d,y)=>(t(),L(Z,null,{default:ee(()=>[b(oe(te),{title:"Métodos de pagamentos"}),l.value?k("",!0):(t(),i("div",lo,[b(q,{text:"Cadastrar novo método",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:n})])),e("div",no,[e("div",null,[(t(),L(pe,{key:f.value,ref:"listaDados",onDadoSelecionado:h}))]),e("div",io,[l.value?k("",!0):(t(),i(I,{key:0},[C.value?(t(),L(qe,{key:0,dados:C.value,onAtualizar:r},null,8,["dados"])):k("",!0)],64)),l.value?(t(),L(so,{key:1,onVoltar:r})):k("",!0)])])]),_:1}))}},yo=T(ro,[["__scopeId","data-v-43f09d75"]]);export{yo as default};
