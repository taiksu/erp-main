import{L}from"./LayoutFranqueado-Dg4kLBEk.js";import{d,i as C,j as V,e as r,o as n,f,a,F as D,h as j,t as w,k as b,l as I,q as M,b as g,c as y,w as z,u as E,Z as P}from"./app-vGR4VHCP.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as S}from"./InputModel-BvMn92CJ.js";import{_ as $}from"./LabelModel-BQtPKLWR.js";import{D as U}from"./Deslizante-DHmCuj6D.js";/* empty css                                                                   */const q={key:0,class:"loading-overlay"},B={class:"card-container"},F=["onClick"],N={class:"card-inner flex items-center justify-center"},A={class:"icon-container flex items-center justify-center"},O=["src"],Q={class:"text-container"},T={class:"city font-bold"},K={__name:"ListarCanaisVendas",emits:["dado-selecionado"],setup(x,{emit:u}){const m=u,l=d([]),_=d(""),t=d(!1),i=async()=>{t.value=!0;try{const s=await b.get("/api/canais-vendas/lista");l.value=Object.values(s.data)}catch(s){console.error("Erro ao carregar os dados:",s)}finally{t.value=!1}},c=s=>s?new URL(s,window.location.origin).href:"/storage/images/no_imagem.svg";C(i);const p=s=>{m("dado-selecionado",s)},h=V(()=>{const s=_.value.toLowerCase();return l.value.filter(e=>String(e.id).toLowerCase().includes(s)||e.fornecedor_nome.toLowerCase().includes(s))});return(s,e)=>(n(),r("div",null,[t.value?(n(),r("div",q,e[0]||(e[0]=[a("div",{class:"spinner"},null,-1)]))):f("",!0),e[2]||(e[2]=a("div",{class:"painel-title"},"Canais de venda",-1)),e[3]||(e[3]=a("div",{class:"painel-subtitle"},[a("p",null,"Plataformas de e-commerce da sua unidade")],-1)),a("div",B,[(n(!0),r(D,null,j(h.value,o=>(n(),r("div",{key:o.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:v=>p(o)},[a("div",N,[a("div",A,[a("img",{src:c(o.img_icon),alt:"Ícone",class:"w-[42px] h-[42px] object-contain"},null,8,O)]),a("div",Q,[a("div",T,w(o.nome),1)]),e[1]||(e[1]=a("div",{class:"action-icon"},null,-1))])],8,F))),128))])]))}},R=k(K,[["__scopeId","data-v-4788c62b"]]),Z={class:"elemento-fixo"},G={key:0},H={key:0,class:"loading-overlay"},J={class:"w-full h-[237px] p-12 bg-white rounded-[20px] flex-col justify-center items-center gap-10 inline-flex"},W={class:"self-stretch text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},X={class:"w-full h-[63px] relative"},Y={class:"mt-8 w-full p-12 bg-white rounded-[20px] flex justify-between items-center gap-5"},ee={class:"flex flex-col w-2/3"},ae={class:"text-sm font-semibold text-gray-700"},se={class:"w-1/2 flex justify-end"},te={__name:"DetalhesCanaisVendas",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(x,{emit:u}){const m=I(),l=x,_=d(!1),t=d(0),i=d(!1),c=d(!1);let p=!1;const h=async()=>{c.value=!0;try{const e=await b.get(`/api/canais-vendas/verificar-pagamentos/${l.dados.id}`);e.status===200&&e.data?(console.log("Dados recebidos:",e.data),t.value=e.data.data.porcentagem||0,i.value=e.data.data.status===1):(e.status===404||!e.data)&&(console.info("Nenhum canal de vendas foi encontrado."),t.value=0,i.value=!1)}catch(e){console.error("Erro ao busca canais de venda:",e),t.value=0,i.value=!1}finally{c.value=!1}},s=async()=>{try{await new Promise(v=>setTimeout(v,2e3)),c.value=!0;const e={unidade_id:l.dados.id,canal_de_vendas_id:l.dados.id,porcentagem:t.value,status:i.value?1:0},o=await b.post("/api/canais-vendas/upsert",e);p||(p=!0,m.success("Método atualizado",{onClose:()=>{p=!1}}))}catch(e){console.error("Erro ao atualizar o método de pagamento:",e)}finally{c.value=!1}};return M(()=>l.dados.id,()=>{h()}),C(()=>{h()}),(e,o)=>(n(),r("div",Z,[_.value?f("",!0):(n(),r("div",G,[c.value?(n(),r("div",H,o[2]||(o[2]=[a("div",{class:"spinner"},null,-1)]))):f("",!0),a("div",J,[a("div",W,w(x.dados.nome),1),a("div",X,[g($,{class:"font-semibold text-gray-900",text:"Quanto você paga de taxa?"}),g(S,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=v=>t.value=v),placeholder:"5%",onInput:s},null,8,["modelValue"])])]),a("div",Y,[a("div",ee,[g($,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),a("span",ae,w(i.value?"Ativado":"Desativado"),1)]),a("div",se,[g(U,{status:i.value,"onUpdate:status":o[1]||(o[1]=v=>i.value=v),onClick:s},null,8,["status"])])])]))]))}},oe=k(te,[["__scopeId","data-v-6d653556"]]),ne={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},le={key:0},ie={class:"flex flex-col gap-4"},de={__name:"Index",setup(x){const u=d(null),m=d(0),l=d(!1),_=t=>{u.value=t};return(t,i)=>(n(),y(L,null,{default:z(()=>[g(E(P),{title:"Métodos de pagamentos"}),a("div",ne,[l.value?f("",!0):(n(),r("div",le,[(n(),y(R,{key:m.value,ref:"listaDados",onDadoSelecionado:_}))])),a("div",ie,[l.value?f("",!0):(n(),r(D,{key:0},[u.value?(n(),y(oe,{key:0,dados:u.value},null,8,["dados"])):f("",!0)],64))])])]),_:1}))}},pe=k(de,[["__scopeId","data-v-6a31bc40"]]);export{pe as default};
