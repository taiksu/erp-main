import{A as ge}from"./LayoutFranqueadora-DZJsUdwc.js";import{d as l,i as te,k as A,j as xe,e as n,o as r,a as e,m as z,v as K,F as P,h as N,t as D,g as ce,f as L,l as ie,y as _e,q as be,c as Q,w as ne,b,p as M,x as oe,s as pe,u as he,Z as ye}from"./app-vGR4VHCP.js";import{B as de}from"./ButtonPrimaryMedio-C9HfT39S.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as me}from"./index-CWjNdAPT.js";import{B as we}from"./ButtonEditeMedio-BwSG8MHL.js";import{C as ue}from"./ConfirmDialog-1acut7He.js";import{I as ve}from"./InputModel-BvMn92CJ.js";import{_ as X}from"./LabelModel-BQtPKLWR.js";import{B as fe}from"./ButtonCancelar-DXabxgHh.js";import"./user-BrYGJ_Un.js";const $e={class:"search-container relative flex items-center w-full mb-4"},ke={class:"category-container"},Ce={class:"w-full h-[18.63px] text-[#6d6d6d] text-[15px] font-semibold font-['Figtree'] leading-tight mt-8 mb-1"},Fe={class:"card-container"},Ve=["onClick"],Ue={class:"card-inner"},De={class:"icon-container"},Ie={class:"icon-leaf"},Ee=["src"],Pe={class:"text-container"},Be={class:"city"},je={key:0,class:"estrela"},Se={__name:"ListarInsumos",emits:["produto-selecionado"],setup(U,{emit:I}){const c=l({}),V=l(""),y=I;te(()=>{w()});async function w(){try{const d=await A.get("/api/produtos/lista-insumos");console.log("Produtos carregados:",d.data),typeof d.data=="object"&&d.data!==null?c.value=$(d.data):console.error("Esperava um objeto de categorias de produtos, mas recebi:",d.data)}catch(d){console.error("Erro ao carregar os produtos:",d)}}function $(d){const p=Object.keys(d),m={};return p.forEach(h=>{m[h]={categoria_nome:d[h].categoria_nome,produtos:d[h].produtos||[]}}),m}function f(d){return d?new URL(d,window.location.origin).href:"/storage/images/no_imagem.svg"}function v(d){y("produto-selecionado",d)}const g=xe(()=>{const d=V.value.toLowerCase(),p={};return Object.keys(c.value).forEach(m=>{const h=c.value[m].produtos.filter(k=>k.nome.toLowerCase().includes(d));h.length>0&&(p[m]={categoria_nome:c.value[m].categoria_nome,produtos:h})}),p});return(d,p)=>(r(),n("div",null,[p[4]||(p[4]=e("div",{class:"painel-title"},"Insumos",-1)),p[5]||(p[5]=e("div",{class:"painel-subtitle"},[e("p",null,"Adicione os itens que você recebeu ao estoque")],-1)),e("div",$e,[p[1]||(p[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),z(e("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=m=>V.value=m),placeholder:"Buscar um produto",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[K,V.value]])]),e("div",ke,[(r(!0),n(P,null,N(g.value,(m,h)=>(r(),n("div",{key:h,class:"categoria-group"},[e("div",Ce,D(h),1),e("div",Fe,[(r(!0),n(P,null,N(m.produtos,k=>(r(),n("div",{key:k.id,class:"card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",onClick:C=>v(k)},[e("div",Ue,[e("div",De,[p[2]||(p[2]=e("div",{class:"icon-bg"},null,-1)),e("div",Ie,[e("img",{src:f(k.profile_photo),alt:"Imagem do produto",class:"w-12 h-12 rounded-lg"},null,8,Ee)])]),e("div",Pe,[e("div",Be,[ce(D(k.nome)+" ",1),k.estrela?(r(),n("span",je,"★")):L("",!0)])]),p[3]||(p[3]=e("div",{class:"action-icon"},null,-1))])],8,Ve))),128))])]))),128))])]))}},qe=ae(Se,[["__scopeId","data-v-1866de4a"]]),Re={key:0,class:"sidebar-container"},ze={key:0,class:"loading-overlay"},Le={key:1,class:"w-full h-[860px] bg-white rounded-[20px] p-12"},Me={class:"flex justify-center mb-6 relative group"},Ae=["src"],Ne=["src"],Oe={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Te={key:0,class:"error-message"},Qe={class:"flex flex-wrap md:flex-nowrap items-end gap-4 mt-8 w-full"},Xe={class:"flex flex-col w-full md:w-1/2"},Je=["value"],Ke={class:"flex flex-col w-full md:w-1/2"},Ze=["value"],Ge={class:"mt-8"},He={class:"min-w-full table-auto"},We={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-left"},Ye={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},et=["onUpdate:modelValue","onInput"],tt={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},ot=["onUpdate:modelValue","onBlur","placeholder","onInput"],at={class:"flex justify-start space-x-1 mt-[8%]"},st={__name:"EditarProduto",props:{isVisible:{type:Boolean,required:!0},produto:{type:Object,required:!0}},emits:["cancelar","atualizar"],setup(U,{emit:I}){const c=ie(),V=t=>(t=t.toString().replace(/\D/g,""),t=(parseInt(t,10)/100).toFixed(2),new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)),y=U,w=I,$=l(""),f=l(null),v=l(""),g=l([{nome:"A granel",id:"a_granel"},{nome:"Unitário",id:"unitario"}]),d=l(""),p=l([]),m=l(""),h=l(null),k=l(""),C=l(null),F=l(!1),E=l(!1),q=l(""),_=l({}),x=l({}),B=l([]),{produto:T}=_e(y),j=()=>{f.value=!f.value,console.log("Prioridade:",f.value,typeof f.value)},Z=async()=>{try{const t=await A.get("/api/fornecedores");B.value=t.data.data,T.value.precos.forEach(a=>{_.value[a.id]=(a.preco_unitario/100).toFixed(2)})}catch(t){console.error("Erro ao carregar fornecedores:",t)}},G=async()=>{try{const t=await A.get("/api/categorias-produtos/lista");p.value=t.data}catch{c.error("Erro ao carregar categorias.")}},se=t=>{t&&($.value=t.nome||"",f.value=!!t.prioridade,d.value=t.categoria_id||"",v.value=t.unidadeDeMedida||"",m.value=t.profile_photo||"",B.value=t.fornecedores||[],p.value=t.categorias||[],_.value=t.precos.reduce((a,s)=>(a[s.fornecedor_id]=s.preco_unitario?V(s.preco_unitario):"",a),{}),x.value=t.precos.reduce((a,s)=>(a[s.fornecedor_id]=s.qtd_minima||"",a),{}))};be(()=>{var t;return(t=y.produto)==null?void 0:t.id},t=>{t&&(se(y.produto),Z(),G())},{immediate:!0}),te(()=>{Z(),G()});const H=async()=>{if(!$.value){c.error("O campo nome é obrigatório.");return}try{F.value=!0;const t=new FormData,a=f.value?1:0;console.log("Prioridade enviada:",a,typeof a);const s={fornecedores:B.value.map(J=>({fornecedor_id:J.id,preco_unitario:_.value[J.id]||null,qtd_minima:x.value[J.id]||null}))};console.log(s),t.append("id",y.produto.id),t.append("nome",$.value),t.append("prioridade",a),t.append("categoria_id",d.value),t.append("unidadeDeMedida",v.value),t.append("precos",JSON.stringify(s)),h.value&&t.append("profile_photo",h.value);const R=await A.post("/api/produtos/atualizar",t,{headers:{"Content-Type":"multipart/form-data"}});c.success("Produto atualizado com sucesso!"),w("atualizar")}catch(t){console.error("Erro ao atualizar o produto:",t),t.response?c.error(`Erro: ${t.response.data.message||"Erro desconhecido"}`):t.request?c.error("Erro ao conectar ao servidor. Tente novamente."):c.error(`Erro: ${t.message}`)}finally{F.value=!1}},le=t=>{let a=_.value[t]||"";a=a.toString().replace(/\D/g,""),a=(parseInt(a,10)/100).toFixed(2);const s=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);_.value[t]=`R$ ${s}`},W=t=>{let a=x.value[t]||"";if(!a.trim()){x.value[t]="";return}if(v.value==="unitario"){let s=a.replace(/\D/g,"");x.value[t]=s}else if(v.value==="a_granel"){let s=a.replace(/\D/g,"");if(!s){x.value[t]="";return}let R=s.slice(0,-3)||"0",J=s.slice(-3).padStart(3,"0");x.value[t]=`${Number(R).toLocaleString("pt-BR")},${J}`}},Y=t=>t?new URL(t,window.location.origin).href:"/storage/images/no_imagem.svg",re=t=>{q.value=t,E.value=!0},ee=()=>{H(),E.value=!1},u=()=>{E.value=!1},i=()=>{var t;(t=C.value)==null||t.click()},o=()=>{m.value="",c.info("Imagem removida.")},S=t=>{const a=t.target.files[0];if(a){if(a.size>5*1024*1024){c.error("A imagem não pode exceder 5 MB.");return}h.value=a;const s=new FileReader;s.onload=()=>{m.value=s.result,c.success("Imagem carregada com sucesso!")},s.readAsDataURL(a)}},O=()=>{w("cancelar")};return(t,a)=>(r(),Q(pe,{name:"fade"},{default:ne(()=>[U.isVisible?(r(),n("div",Re,[F.value?(r(),n("div",ze,a[5]||(a[5]=[e("div",{class:"spinner"},null,-1)]))):(r(),n("div",Le,[e("form",{onSubmit:M(H,["prevent"])},[e("div",Me,[e("img",{src:f.value?"/storage/images/favorito_selecionado.svg":"/storage/images/favorito_selecionar.svg",alt:"Favorito",title:"Adicionar esse item como prioridade.",class:"absolute top-2 right-2 w-9 h-9 cursor-pointer",onClick:M(j,["stop"])},null,8,Ae),e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:i},[m.value?(r(),n(P,{key:0},[e("img",{src:Y(m.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,Ne),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:a[0]||(a[0]=M(()=>{},["stop"]))},[e("button",{onClick:M(o,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(r(),n("img",Oe))]),e("input",{type:"file",ref_key:"fileInput",ref:C,accept:"image/*",class:"hidden",onChange:S},null,544)]),b(X,{text:"Nome"}),b(ve,{modelValue:$.value,"onUpdate:modelValue":a[1]||(a[1]=s=>$.value=s),placeholder:""},null,8,["modelValue"]),k.value?(r(),n("div",Te,D(k.value),1)):L("",!0),e("div",Qe,[e("div",Xe,[b(X,{text:"Unidade de medida",class:"mb-2"}),z(e("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>v.value=s),class:"h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[a[6]||(a[6]=e("option",{value:"",disabled:"",selected:""}," Selecione uma unidade ",-1)),(r(!0),n(P,null,N(g.value,s=>(r(),n("option",{key:s.id,value:s.id,class:"text-base font-semibold"},D(s.nome),9,Je))),128))],512),[[oe,v.value]])]),e("div",Ke,[b(X,{text:"Categoria",class:"mb-2"}),z(e("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>d.value=s),class:"h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[a[7]||(a[7]=e("option",{value:"",disabled:"",selected:""}," Selecione uma categoria ",-1)),(r(!0),n(P,null,N(p.value,s=>(r(),n("option",{key:s.id,value:s.id,class:"text-base font-semibold"},D(s.nome),9,Ze))),128))],512),[[oe,d.value]])])]),e("div",Ge,[e("table",He,[a[8]||(a[8]=e("thead",null,[e("tr",{class:"bg-[#d2fac3]"},[e("th",{class:"px-6 py-2 text-left text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider rounded-tl-2xl"}," Fornecedores "),e("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider"}," Valor "),e("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider rounded-tr-2xl"}," Qtd.Mínima ")])],-1)),e("tbody",null,[(r(!0),n(P,null,N(B.value,s=>(r(),n("tr",{key:s.id},[e("td",We,D(s.razao_social),1),e("td",Ye,[z(e("input",{"onUpdate:modelValue":R=>_.value[s.id]=R,type:"text",placeholder:"R$ 0,00",onInput:R=>le(s.id),class:"border rounded-lg px-2 py-1 w-[110px] h-[38px] text-center"},null,40,et),[[K,_.value[s.id]]])]),e("td",tt,[z(e("input",{"onUpdate:modelValue":R=>x.value[s.id]=R,onBlur:R=>W(s.id),type:"text",placeholder:v.value==="unitario"?"0":"0,000",onInput:R=>W(s.id),class:"border rounded-lg px-2 py-1 w-[110px] h-[38px] text-center"},null,40,ot),[[K,x.value[s.id]]])])]))),128))])])]),e("div",at,[b(fe,{class:"w-full",text:"Cancelar",onClick:O}),b(de,{class:"w-full",text:"Atualizar",onClick:a[4]||(a[4]=s=>re("Atualizar esse Produto?"))})])],32),b(ue,{isVisible:E.value,motivo:q.value,onConfirm:ee,onCancel:u},null,8,["isVisible","motivo"])]))])):L("",!0)]),_:1}))}},lt=ae(st,[["__scopeId","data-v-cf26ece1"]]),rt={class:"elemento-fixo"},it={key:0,class:"w-full h-[200px] bg-white rounded-[20px] p-12"},nt={class:"relative w-full h-full"},dt={class:"flex items-center"},ut={class:"w-1/1 flex justify-center"},ct=["src"],pt={class:"w-2/3 pl-5"},mt={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},vt={class:"owner"},ft={class:"w-1/1"},gt={key:1,class:"mt-4"},xt={__name:"DetalhesProduto",props:{produto:{type:Object,required:!0}},emits:["atualizar"],setup(U,{emit:I}){const c=ie(),V=I,y=U,w=l(!1),$=l(""),f=l(!1),v=l(!1),g=l(!1),d=()=>{dadosProduto.fetchProduto()},p=_=>_?new URL(_,window.location.origin).href:"/storage/images/no_imagem.svg",m=async()=>{var _,x,B,T;try{g.value=!0;const j=await A.delete(`/api/produtos/excluir/${y.produto.id}`);console.log(j.data.message),c.success("Produto deletado com sucesso!"),me.Inertia.visit(route("franqueadora.insumos"))}catch(j){c.error("Erro ao deletar o produto:",((x=(_=j.response)==null?void 0:_.data)==null?void 0:x.error)||j.message),console.error("Erro ao deletar o produto:",((T=(B=j.response)==null?void 0:B.data)==null?void 0:T.error)||j.message)}finally{g.value=!1}},h=()=>{v.value=!v.value,f.value=!1},k=_=>{$.value=_,w.value=!0},C=()=>{m(),w.value=!1},F=()=>{w.value=!1},E=()=>{v.value=!1,f.value=!0},q=()=>{v.value=!1,f.value=!0,V("atualizar")};return(_,x)=>(r(),n("div",rt,[v.value?L("",!0):(r(),n("div",it,[e("div",nt,[e("div",dt,[e("div",ut,[e("img",{src:p(U.produto.profile_photo),alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-lg"},null,8,ct)]),e("div",pt,[e("div",mt,[ce(D(U.produto.nome||"N/A")+" ",1),e("div",vt,D(U.produto.categoria)+" / "+D(U.produto.unidadeDeMedida),1)])]),e("div",ft,[b(ue,{isVisible:w.value,motivo:$.value,onConfirm:C,onCancel:F},null,8,["isVisible","motivo"]),e("div",{class:"absolute top-4 right-4 cursor-pointer",onClick:x[0]||(x[0]=B=>k("Excluir esse produto?"))},x[1]||(x[1]=[e("img",{src:"/storage/images/delete.svg",alt:"Deletar Usuário",class:"w-6 h-6"},null,-1)]))])])])])),U.produto.id&&!v.value?(r(),n("div",gt,[b(we,{text:"Editar insumos","icon-path":"/storage/images/border_color.svg",onClick:h,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):L("",!0),v.value?(r(),Q(lt,{key:2,ref:"dadosProduto",isVisible:v.value,produto:U.produto,onDadosProduto:d,onCancelar:E,onAtualizar:q},null,8,["isVisible","produto"])):L("",!0)]))}},_t=ae(xt,[["__scopeId","data-v-e0e4c3db"]]),bt={key:0,class:"sidebar-container elemento-fixo"},ht={key:0,class:"loading-overlay"},yt={key:1,class:"w-full h-[80%] bg-white rounded-[20px] p-12"},wt={class:"flex justify-center mb-6 relative group"},$t=["src"],kt=["src"],Ct={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Ft={key:0,class:"error-message"},Vt={class:"flex flex-wrap md:flex-nowrap items-end gap-4 mt-8 w-full"},Ut={class:"flex flex-col w-full md:w-1/2"},Dt=["value"],It={class:"flex flex-col w-full md:w-1/2"},Et=["value"],Pt={class:"mt-12"},Bt={class:"min-w-full table-auto"},jt={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-left"},St={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},qt=["onUpdate:modelValue","onInput"],Rt={class:"px-6 py-2 text-[16px] text-gray-800 font-semibold text-center"},zt=["onUpdate:modelValue","placeholder","onInput"],Lt={class:"flex justify-start space-x-1 mt-[15%]"},Mt={__name:"CadastroProduto",props:{isVisible:{type:Boolean,required:!0}},emits:["cancelar"],setup(U,{emit:I}){const c=ie(),V=I,y=l(""),w=l(""),$=l(!1),f=l(""),v=l([]),g=l(""),d=l([{nome:"A granel",id:"a_granel"},{nome:"Unitário",id:"unitario"}]),p=l(null),m=l(""),h=l(null),k=l(!1),C=l({}),F=l({}),E=l([]),q=l(!1),_=l("");te(async()=>{try{const u=await A.get("/api/fornecedores");E.value=u.data.data,E.value.forEach(i=>{C.value[i.id]||(C.value[i.id]="R$ 0,00")})}catch{c.error("Erro ao carregar fornecedores.")}E.value.forEach(u=>{C.value[u.id]&&x(u.id)})}),te(async()=>{try{const u=await A.get("/api/categorias-produtos/lista");v.value=u.data}catch{c.error("Erro ao carregar categorias.")}});const x=u=>{let i=C.value[u]||"";i=i.toString().replace(/\D/g,""),i=(parseInt(i,10)/100).toFixed(2);const o=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i);C.value[u]=`R$ ${o}`},B=u=>{let i=F.value[u]||"";if(!i.trim()){F.value[u]="";return}if(g.value==="unitario"){let o=i.replace(/\D/g,"");F.value[u]=o}else if(g.value==="a_granel"){let o=i.replace(/\D/g,"");if(!o){F.value[u]="";return}let S=o.slice(0,-3)||"0",O=o.slice(-3).padStart(3,"0");F.value[u]=`${Number(S).toLocaleString("pt-BR")},${O}`}},T=()=>{var u;(u=h.value)==null||u.click()},j=u=>{_.value=u,q.value=!0},Z=()=>{ee(),q.value=!1},G=()=>{q.value=!1},se=()=>{w.value="",c.info("Imagem removida.")},H=u=>{const i=u.target.files[0];if(i){p.value=i;const o=new FileReader;o.onload=()=>{w.value=o.result,c.success("Imagem carregada com sucesso!")},o.readAsDataURL(i)}},le=()=>{Y(),V("cancelar")},W=()=>{$.value=!$.value},Y=()=>{y.value="",f.value="",g.value="",w.value="",p.value=null,m.value=""},re=()=>!y.value||!p.value||!g.value||!f.value?(c.error("Por favor, preencha todos os campos obrigatórios."),m.value="Por favor, preencha todos os campos obrigatórios.",!1):!0,ee=async()=>{var u,i;if(re())try{k.value=!0;const o=new FormData;o.append("nome",y.value),o.append("prioridade",$.value),o.append("categoria_id",f.value),o.append("unidadeDeMedida",g.value),o.append("profile_photo",p.value),C.value&&Object.keys(C.value).length>0&&Object.entries(C.value).forEach(([O,t])=>{t&&t!==""&&t!=="R$ NaN"&&o.append(`precos[${O}]`,t)}),F.value&&Object.keys(F.value).length>0&&Object.entries(F.value).forEach(([O,t])=>{t&&t!==""&&o.append(`quantidades[${O}]`,t)});const S=await A.post("/api/produtos/cadastrar",o,{headers:{"Content-Type":"multipart/form-data"}});c.success("Produto cadastrado com sucesso!"),me.Inertia.visit(route("franqueadora.insumos")),Y()}catch(o){c.error("Erro ao cadastrar o produto."),m.value=((i=(u=o.response)==null?void 0:u.data)==null?void 0:i.message)||"Erro inesperado."}finally{k.value=!1}};return(u,i)=>(r(),Q(pe,{name:"fade"},{default:ne(()=>[U.isVisible?(r(),n("div",bt,[k.value?(r(),n("div",ht,i[5]||(i[5]=[e("div",{class:"spinner"},null,-1)]))):(r(),n("div",yt,[e("form",{onSubmit:M(ee,["prevent"])},[e("div",wt,[e("img",{src:$.value?"/storage/images/favorito_selecionado.svg":"/storage/images/favorito_selecionar.svg",alt:"Favorito",title:"Adicionar esse item como prioridade.",class:"absolute top-2 right-2 w-9 h-9 cursor-pointer",onClick:M(W,["stop"])},null,8,$t),e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden relative",onClick:T},[w.value?(r(),n(P,{key:0},[e("img",{src:w.value,alt:"Imagem selecionada",title:"Foto do item",class:"w-full h-full object-cover"},null,8,kt),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:i[0]||(i[0]=M(()=>{},["stop"]))},[e("button",{onClick:M(se,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(r(),n("img",Ct))]),e("input",{type:"file",ref_key:"fileInput",ref:h,accept:"image/*",class:"hidden",onChange:H},null,544)]),b(X,{text:"Nome"}),b(ve,{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=o=>y.value=o),placeholder:"Shoyu Premium Sakaki"},null,8,["modelValue"]),m.value?(r(),n("div",Ft,D(m.value),1)):L("",!0),e("div",Vt,[e("div",Ut,[b(X,{text:"Unidade de medida",class:"mb-2"}),z(e("select",{"onUpdate:modelValue":i[2]||(i[2]=o=>g.value=o),class:"h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[i[6]||(i[6]=e("option",{value:"",disabled:"",selected:""}," Selecione uma unidade ",-1)),(r(!0),n(P,null,N(d.value,o=>(r(),n("option",{key:o.id,value:o.id,class:"text-base font-semibold"},D(o.nome),9,Dt))),128))],512),[[oe,g.value]])]),e("div",It,[b(X,{text:"Categoria",class:"mb-2"}),z(e("select",{"onUpdate:modelValue":i[3]||(i[3]=o=>f.value=o),class:"h-[44px] bg-[#F3F8F3] border-gray-100 rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#6DB631] font-bold focus:ring-2 focus:ring-green-500"},[i[7]||(i[7]=e("option",{value:"",disabled:"",selected:""}," Selecione uma categoria ",-1)),(r(!0),n(P,null,N(v.value,o=>(r(),n("option",{key:o.id,value:o.id,class:"text-base font-semibold"},D(o.nome),9,Et))),128))],512),[[oe,f.value]])])]),e("div",Pt,[e("table",Bt,[i[8]||(i[8]=e("thead",null,[e("tr",{class:"bg-[#d2fac3]"},[e("th",{class:"px-6 py-2 text-left text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider rounded-tl-2xl"}," Fornecedor "),e("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider"}," Valor "),e("th",{class:"px-6 py-2 text-[15px] font-semibold text-[#1d5915] uppercase tracking-wider rounded-tr-2xl"}," Qtd.Mínima ")])],-1)),e("tbody",null,[(r(!0),n(P,null,N(E.value,o=>(r(),n("tr",{key:o.id},[e("td",jt,D(o.razao_social),1),e("td",St,[z(e("input",{"onUpdate:modelValue":S=>C.value[o.id]=S,type:"text",placeholder:"R$ 0,00",onInput:S=>x(o.id),class:"border rounded-lg px-2 py-1 w-[110px] h-[38px] text-center"},null,40,qt),[[K,C.value[o.id]]])]),e("td",Rt,[z(e("input",{"onUpdate:modelValue":S=>F.value[o.id]=S,type:"text",placeholder:g.value==="unitario"?"0":"0,000",onInput:S=>B(o.id),class:"border rounded-lg px-2 py-1 w-[110px] h-[38px] text-center"},null,40,zt),[[K,F.value[o.id]]])])]))),128))])])]),e("div",Lt,[b(fe,{class:"w-full",text:"Cancelar",onClick:le}),b(de,{class:"w-full",text:"Cadastrar",onClick:i[4]||(i[4]=o=>j("Criar novo Produto?"))})])],32)])),b(ue,{isVisible:q.value,motivo:_.value,onConfirm:Z,onCancel:G},null,8,["isVisible","motivo"])])):L("",!0)]),_:1}))}},At=ae(Mt,[["__scopeId","data-v-d6a1f4c8"]]),Nt={class:"flex flex-col gap-4"},Ot={class:"absolute bottom-4 right-4"},Tt={key:1,class:"mt-4"},oo={__name:"Index",setup(U){const I=l(null),c=l(0),V=l(!1),y=()=>{V.value=!V.value},w=()=>{f(),V.value=!1},$=()=>{c.value+=1,I.value=null},f=()=>{var d;(d=l("listarUnidades").value)==null||d.fetchUnidades()},v=g=>{g&&typeof g=="object"?I.value=g:console.warn("Dados inválidos recebidos no evento produto-selecionado:",g)};return(g,d)=>(r(),Q(ge,null,{default:ne(()=>[b(he(ye),{title:"Insumos"}),e("div",{class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 overflow-hidden card-container h-full overflow-y-scroll",onScrollPassive:d[0]||(d[0]=()=>{})},[e("div",null,[(r(),Q(qe,{key:c.value,ref:"listarUnidades",onUnidadeCadastrada:f,onProdutoSelecionado:v}))]),e("div",Nt,[V.value?(r(),n("div",Tt,[b(At,{isVisible:V.value,onUnidadeCadastrada:w,onCancelar:y},null,8,["isVisible"])])):(r(),n(P,{key:0},[I.value?(r(),Q(_t,{key:0,produto:I.value,onAtualizar:$},null,8,["produto"])):L("",!0),e("div",Ot,[b(de,{text:"Cadastrar insumo",iconPath:"/storage/images/arrow_left_alt.svg",onClick:y})])],64))])],32)]),_:1}))}};export{oo as default};
