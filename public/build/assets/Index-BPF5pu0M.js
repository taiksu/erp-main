import{A as X}from"./LayoutFranqueadora-DZJsUdwc.js";import{d as a,i as G,j as K,e as d,o as t,f as k,a as e,F as j,h as Q,n as Z,t as U,k as B,l as O,b,m as S,p as M,v as T,q as H,c as L,w as J,u as W,Z as Y}from"./app-vGR4VHCP.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as A}from"./LabelModel-BQtPKLWR.js";import{D as ee}from"./Deslizante-DHmCuj6D.js";import{B as ae}from"./ButtonEditeMedio-BwSG8MHL.js";import{B as R}from"./ButtonPrimaryMedio-C9HfT39S.js";import{B as q}from"./ButtonCancelar-DXabxgHh.js";import{C as N}from"./ConfirmDialog-1acut7He.js";import"./user-BrYGJ_Un.js";/* empty css                                                                   */const se={key:0,class:"loading-overlay"},te={class:"card-container"},oe=["onClick"],le={class:"card-inner flex items-center justify-center"},ne={class:"icon-container flex items-center justify-center"},ie=["src"],re={class:"text-container"},ce={class:"city font-bold"},de={__name:"ListarCanisVendas",emits:["dado-selecionado"],setup(V,{emit:C}){const m=C,l=a([]),_=a(""),o=a(!1),n=async()=>{o.value=!0;try{const i=await B.get("/api/admin-canais-vendas/lista");l.value=Object.values(i.data)}catch(i){console.error("Erro ao carregar os dados:",i)}finally{o.value=!1}},u=i=>i?new URL(i,window.location.origin).href:"/storage/images/no_imagem.svg";G(n);const h=i=>{m("dado-selecionado",i)},y=K(()=>{const i=_.value.toLowerCase();return l.value.filter(s=>String(s.id).toLowerCase().includes(i)||s.fornecedor_nome.toLowerCase().includes(i))});return(i,s)=>(t(),d("div",null,[o.value?(t(),d("div",se,s[0]||(s[0]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),s[2]||(s[2]=e("div",{class:"painel-title"},"Canais de vendas",-1)),s[3]||(s[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Gerencie seus canais de vendas para o fluxo de caixa")],-1)),e("div",te,[(t(!0),d(j,null,Q(y.value,x=>(t(),d("div",{key:x.id,class:Z(["card cursor-pointer transform transition-transform duration-200 hover:shadow-lg",{"bg-gray-300":!x.status}]),onClick:$=>h(x)},[e("div",le,[e("div",ne,[e("img",{src:u(x.img_icon),alt:"Ícone",class:"w-[42px] h-[42px] object-contain"},null,8,ie)]),e("div",re,[e("div",ce,U(x.nome),1)]),s[1]||(s[1]=e("div",{class:"action-icon"},null,-1))])],10,oe))),128))])]))}},ue=P(de,[["__scopeId","data-v-1ec0c1f5"]]),ve={key:0,class:"loading-overlay"},me={class:"mt-5"},fe={class:"bg-white rounded-lg p-12"},pe={class:"flex justify-center items-center mb-8"},ge={class:"flex flex-col items-center"},_e={class:"relative group"},he=["src"],ye={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload",class:"w-10 h-10"},xe={key:0,class:"text-red-500 text-sm"},be={class:"form-buttons"},Ce={__name:"EditarCanalVendas",props:{canal:{type:Object,default:null}},emits:["voltar"],setup(V,{emit:C}){const m=V,l=O(),_=C,o=a(m.canal.id),n=a(m.canal.nome),u=a(m.canal.img_icon||""),h=a(null),y=a(""),i=a(null),s=a(!1),x=a(!1),$=a({}),F=p=>p?new URL(p,window.location.origin).href:"/storage/images/no_imagem.svg",z=async()=>{if($.value={},n.value||($.value.nome="O nome é obrigatório"),!u.value&&!h.value&&($.value.selectedFile="O ícone é obrigatório"),Object.keys($.value).length===0)try{s.value=!0;const p=new FormData;p.append("id",o.value),p.append("nome",n.value),h.value&&p.append("profile_photo",h.value);const w=await B.post("/api/admin-canais-vendas/atualizar",p,{headers:{"Content-Type":"multipart/form-data"}});l.success("canal de vendas atualizado com sucesso!"),g()}catch(p){l.error("Erro ao atualizar canal de vendas"),console.error("Erro ao atualizar canal de vendas:",p)}finally{s.value=!1}},I=p=>{y.value=p,x.value=!0},E=()=>{z(),x.value=!1},f=()=>{x.value=!1},c=()=>{var p;(p=i.value)==null||p.click()},r=()=>{u.value="",h.value=null,l.info("Imagem removida.")},v=p=>{const w=p.target.files[0];if(w){h.value=w;const D=new FileReader;D.onload=()=>{u.value=D.result,l.success("Imagem carregada com sucesso!")},D.readAsDataURL(w)}},g=()=>{n.value="",u.value="",h.value=null,$.value={},_("voltar")};return(p,w)=>(t(),d(j,null,[s.value?(t(),d("div",ve,w[3]||(w[3]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",me,[e("div",fe,[e("div",pe,[e("div",ge,[e("div",_e,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden p-2",onClick:c},[u.value?(t(),d(j,{key:0},[e("img",{src:F(u.value),alt:"Imagem selecionada",class:"w-full h-full object-cover"},null,8,he),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:w[0]||(w[0]=M(()=>{},["stop"]))},[e("button",{onClick:M(r,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),d("img",ye))]),e("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*",class:"hidden",onChange:v},null,544)])])]),b(A,{text:"Nome do método"}),S(e("input",{id:"nome","onUpdate:modelValue":w[1]||(w[1]=D=>n.value=D),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"nome do método"},null,512),[[T,n.value]]),$.value.nome?(t(),d("span",xe,U($.value.nome),1)):k("",!0),e("div",be,[b(q,{class:"w-full",text:"Cancelar",onClick:g}),b(R,{text:"Atualizar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:w[2]||(w[2]=D=>I("Atualizar método de pagamento?"))})])])]),b(N,{isVisible:x.value,motivo:y.value,onConfirm:E,onCancel:f},null,8,["isVisible","motivo"])],64))}},we=P(Ce,[["__scopeId","data-v-0a72f5c2"]]),ke={class:"elemento-fixo"},$e={key:0},Ve={key:0,class:"loading-overlay"},De={class:"w-full h-[100px] p-8 bg-white rounded-[20px] flex flex-col justify-center gap-6"},je={class:"flex items-center gap-4 w-full"},Fe=["src"],ze={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[34px] tracking-tight"},Ie={class:"ml-auto flex items-center"},Ee={class:"mt-4 w-full p-8 bg-white rounded-[20px] flex justify-between items-center gap-5"},Le={class:"flex flex-col w-2/3"},Ue={class:"text-sm font-semibold text-gray-700"},Be={class:"w-1/2 flex justify-end"},Pe={key:1,class:"mt-4"},Me={__name:"DetalhesCanaisVendas",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(V,{emit:C}){const m=O(),l=V,_=C,o=a(!1),n=a(!1),u=a(!1),h=a(""),y=a(!!l.dados.status);H(()=>l.dados.status,f=>{y.value=!!f});const i=f=>{h.value=f,u.value=!0},s=()=>{E(),u.value=!1},x=()=>{u.value=!1},$=()=>{o.value=!1,_("atualizar")},F=()=>{o.value=!o.value},z=f=>f?new URL(f,window.location.origin).href:"/storage/images/no_imagem.svg",I=async f=>{try{n.value=!0;const c={canal_de_vendas_id:l.dados.id,status:f?1:0};await B.post("/api/admin-canais-vendas/alternar-status",c),y.value=f,m.success("Canal de vendas atualizado"),_("atualizar")}catch(c){console.error("Erro ao atualizar o Canal de vendas:",c)}finally{n.value=!1}},E=async()=>{var f,c,r,v;try{n.value=!0;const g=await B.delete(`/api/admin-canais-vendas/excluir/${l.dados.id}`);console.log(g.data.message),m.success("Canal de vendas deletado com sucesso!"),_("atualizar")}catch(g){m.error("Erro ao deletar o canal de vendas:",((c=(f=g.response)==null?void 0:f.data)==null?void 0:c.error)||g.message),console.error("Erro ao deletar o canal de vendas :",((v=(r=g.response)==null?void 0:r.data)==null?void 0:v.error)||g.message)}finally{n.value=!1}};return(f,c)=>(t(),d("div",ke,[o.value?k("",!0):(t(),d("div",$e,[n.value?(t(),d("div",Ve,c[2]||(c[2]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",De,[e("div",je,[e("img",{src:z(V.dados.img_icon),alt:"Ícone",class:"w-[50px] h-[50px]"},null,8,Fe),e("div",ze,U(V.dados.nome),1),e("div",Ie,[b(N,{isVisible:u.value,motivo:h.value,onConfirm:s,onCancel:x},null,8,["isVisible","motivo"]),e("div",{class:"cursor-pointer",onClick:c[0]||(c[0]=r=>i("Excluir esse método?"))},c[3]||(c[3]=[e("img",{src:"/storage/images/delete.svg",alt:"Deletar Usuário",class:"w-6 h-6"},null,-1)]))])])]),e("div",Ee,[e("div",Le,[b(A,{class:"font-semibold text-gray-900",text:"Utilizar este método de pagamento?"}),e("span",Ue,U(y.value?"Ativado":"Desativado"),1)]),e("div",Be,[b(ee,{status:y.value,"onUpdate:status":c[1]||(c[1]=r=>y.value=r),onClick:I},null,8,["status"])])])])),V.dados.id&&!o.value?(t(),d("div",Pe,[b(ae,{text:"Editar método","icon-path":"/storage/images/border_color.svg",onClick:F,class:"px-4 py-2 bg-[#F8F8F8] text-white rounded-lg"})])):k("",!0),o.value?(t(),L(we,{key:2,canal:V.dados,isVisible:o.value,onVoltar:$},null,8,["canal","isVisible"])):k("",!0)]))}},Oe=P(Me,[["__scopeId","data-v-eba2bf6b"]]),Ae={key:0,class:"loading-overlay"},Re={class:"mt-5"},Ne={class:"bg-white rounded-lg p-12"},Se={class:"flex justify-center items-center mb-8"},Te={class:"flex flex-col items-center"},qe={class:"relative group"},Xe=["src"],Ge={key:1,src:"/storage/images/arrow_upload_ready.svg",alt:"Ícone de upload"},Ke={key:0,class:"text-red-500 text-sm"},Qe={class:"form-buttons"},Ze={__name:"CadastroCanalVendas",emits:["voltar"],setup(V,{emit:C}){const m=O(),l=C,_=a(""),o=a(""),n=a(null),u=a(""),h=a(null),y=a(!1),i=a(!1),s=a({}),x=async()=>{if(s.value={},_.value||(s.value.nome="O nome é obrigatório"),!o.value&&!n.value&&(s.value.selectedFile="O ícone é obrigatório"),Object.keys(s.value).length===0)try{y.value=!0;const r=new FormData;r.append("nome",_.value),n.value&&r.append("profile_photo",n.value);const v=await B.post("/api/admin-canais-vendas/cadastrar",r,{headers:{"Content-Type":"multipart/form-data"}});m.success("Método de pagamento atualizado com sucesso!"),c()}catch(r){m.error("Erro ao atualizar método de pagamento"),console.error("Erro ao atualizar método de pagamento:",r)}finally{y.value=!1}},$=r=>{u.value=r,i.value=!0},F=()=>{x(),i.value=!1},z=()=>{i.value=!1},I=()=>{var r;(r=h.value)==null||r.click()},E=()=>{o.value="",n.value=null,m.info("Imagem removida.")},f=r=>{const v=r.target.files[0];if(v){n.value=v;const g=new FileReader;g.onload=()=>{o.value=g.result,m.success("Imagem carregada com sucesso!")},g.readAsDataURL(v)}},c=()=>{_.value="",o.value="",n.value=null,s.value={},l("voltar")};return(r,v)=>(t(),d(j,null,[y.value?(t(),d("div",Ae,v[3]||(v[3]=[e("div",{class:"spinner"},null,-1)]))):k("",!0),e("div",Re,[e("div",Ne,[e("div",Se,[e("div",Te,[e("div",qe,[e("div",{class:"w-[110px] h-[110px] bg-[#f3f8f3] rounded-xl flex items-center justify-center cursor-pointer overflow-hidden p-2",onClick:I},[o.value?(t(),d(j,{key:0},[e("img",{src:o.value,alt:"Imagem selecionada",class:"w-full h-full object-cover p-3"},null,8,Xe),e("div",{class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",onClick:v[0]||(v[0]=M(()=>{},["stop"]))},[e("button",{onClick:M(E,["stop"]),class:"w-8 h-8 bg-red-600 text-white rounded-full flex items-center justify-center font-bold text-sm"}," X ")])],64)):(t(),d("img",Ge))]),e("input",{type:"file",ref_key:"fileInput",ref:h,accept:"image/*",class:"hidden",onChange:f},null,544)])])]),b(A,{text:"Nome do Canal de vendas"}),S(e("input",{id:"nome","onUpdate:modelValue":v[1]||(v[1]=g=>_.value=g),class:"w-full py-3 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"Nome do canal de vendas"},null,512),[[T,_.value]]),s.value.nome?(t(),d("span",Ke,U(s.value.nome),1)):k("",!0),e("div",Qe,[b(q,{class:"w-full",text:"Cancelar",onClick:c}),b(R,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:v[2]||(v[2]=g=>$("Cadastar método de pagamento?"))})])])]),b(N,{isVisible:i.value,motivo:u.value,onConfirm:F,onCancel:z},null,8,["isVisible","motivo"])],64))}},He=P(Ze,[["__scopeId","data-v-250c0b51"]]),Je={key:0,class:"fixed bottom-6 right-6"},We={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},Ye={class:"flex flex-col gap-4"},ea={__name:"Index",setup(V){const C=a(null),m=a(0),l=a(!1),_=u=>{C.value=u},o=()=>{m.value+=1,C.value=null,l.value=!1},n=()=>{l.value=!l.value,l.value&&(C.value=null)};return(u,h)=>(t(),L(X,null,{default:J(()=>[b(W(Y),{title:"Canais de Vendas"}),l.value?k("",!0):(t(),d("div",Je,[b(R,{text:"Cadastrar canal de vendas",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:n})])),e("div",We,[e("div",null,[(t(),L(ue,{key:m.value,ref:"listaDados",onDadoSelecionado:_}))]),e("div",Ye,[l.value?k("",!0):(t(),d(j,{key:0},[C.value?(t(),L(Oe,{key:0,dados:C.value,onAtualizar:o},null,8,["dados"])):k("",!0)],64)),l.value?(t(),L(He,{key:1,onVoltar:o})):k("",!0)])])]),_:1}))}},va=P(ea,[["__scopeId","data-v-f82dbdfc"]]);export{va as default};
