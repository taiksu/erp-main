import{l as E,d as h,j as w,i as j,T as N,c as C,o as l,w as B,b as i,a as s,u as d,Z as U,e as u,f as b,t as n,p as V,m,n as f,v}from"./app-vGR4VHCP.js";import{L as z}from"./LayoutFranqueado-Dg4kLBEk.js";import{_ as p}from"./LabelModel-BQtPKLWR.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={class:"bg-white rounded-tl-[20px] rounded-tr-[20px] p-7 shadow-sm"},I={key:0,class:"flex justify-between items-center"},$={class:"flex justify-center w-1/4"},D=["src"],L={class:"w-2/3"},q={class:"text-[#262a27] text-[28px] font-bold font-['Figtree'] leading-[30px] tracking-tight"},G={class:"flex gap-4 mt-2"},R={class:"flex-1 h-[44px] bg-[#F3F8F3] rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#262A27] font-bold flex items-center"},Z={class:"flex-1 h-[44px] bg-[#F3F8F3] rounded-lg border-2 border-[#d7d7db] p-2 text-base text-[#262A27] font-bold flex items-center"},H={key:1,class:"grid grid-cols-2 gap-4 mt-8"},J={class:"w-full h-[44px] bg-white border-2 border-[#d7d7db] rounded-lg p-2 text-base font-bold text-gray-800"},K={class:"w-full h-[44px] bg-white border-2 border-[#d7d7db] rounded-lg p-2 text-base font-bold text-gray-800"},O={key:2,class:"animate-pulse"},Q={class:"bg-white rounded-tl-[20px] rounded-tr-[20px] p-7 shadow-sm"},W={class:"grid grid-cols-1 gap-4"},X={key:0,class:"text-red-500 text-sm"},Y={key:0,class:"text-red-500 text-sm"},ss={key:0,class:"text-red-500 text-sm"},es={class:"mt-4"},ts=["disabled"],os={__name:"Index",setup(as){const x=E(),o=h(null),y=w(()=>{var t,e;return((t=o.value)==null?void 0:t.profile_photo_url)||`https://ui-avatars.com/api/?name=${S((e=o.value)==null?void 0:e.name)}&color=7F9CF5&background=EBF4FF`}),F=w(()=>{var e;const t=((e=o.value)==null?void 0:e.salario)||0;return`R$ ${Number(t).toFixed(2).replace(".",",")}`}),S=t=>t?t.split(" ").map(g=>g.charAt(0).toUpperCase()).join(""):"*",k=async()=>{try{const t=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!t.ok)throw new Error("Erro ao carregar perfil do usuário");const e=await t.json();o.value=e.data}catch(t){console.error("Erro ao buscar perfil:",t),o.value=null}};j(()=>{k()});const r=N({current_password:"",password:"",password_confirmation:""}),a=h({}),A=()=>{r.post(route("usuario.password.update"),{onSuccess:()=>{x.success("Atualizado com sucesso"),r.reset(),a.value={}},onError:t=>{x.error("Erro atualizadas"),a.value=t}})};return(t,e)=>(l(),C(z,null,{default:B(()=>{var g,_;return[i(d(U),{title:"Minha conta"}),e[5]||(e[5]=s("div",{class:"painel-header"},[s("div",{class:"painel-title"},"Minha conta")],-1)),e[6]||(e[6]=s("div",{class:"painel-subtitle"},[s("p",null,"Seus dados pessoais e senha.")],-1)),s("div",P,[s("div",T,[o.value?(l(),u("div",I,[s("div",$,[s("img",{src:y.value,alt:"Foto do Usuário",class:"w-20 h-20 rounded-md shadow-sm"},null,8,D)]),s("div",L,[s("div",q,n(o.value.name||"N/A"),1),s("div",G,[s("div",R,[s("span",null,n(((g=o.value.cargo)==null?void 0:g.nome)||"Sem informações"),1)]),s("div",Z,[s("span",null,n(((_=o.value.unidade)==null?void 0:_.cidade)||"Sem informações"),1)])])])])):b("",!0),o.value?(l(),u("div",H,[s("div",null,[i(p,{text:"E-mail"}),s("p",J,n(o.value.email||"N/A"),1)]),s("div",null,[i(p,{text:"Salário"}),s("p",K,n(F.value),1)])])):(l(),u("div",O,e[3]||(e[3]=[s("div",{class:"flex justify-between items-center"},[s("div",{class:"w-20 h-20 bg-gray-200 rounded-md"}),s("div",{class:"w-2/3 space-y-2"},[s("div",{class:"h-8 bg-gray-200 rounded"}),s("div",{class:"w-72 h-[44px] bg-gray-200 rounded-lg"}),s("div",{class:"w-72 h-[44px] bg-gray-200 rounded-lg"})])],-1),s("div",{class:"grid grid-cols-1 gap-4 mt-8"},[s("div",{class:"h-[44px] bg-gray-200 rounded-lg"}),s("div",{class:"h-[44px] bg-gray-200 rounded-lg"})],-1)])))]),s("div",Q,[e[4]||(e[4]=s("h3",{class:"text-xl font-bold text-[#262a27] mb-4"},"Atualizar Senha",-1)),s("form",{onSubmit:V(A,["prevent"])},[s("div",W,[s("div",null,[i(p,{text:"Senha Atual"}),m(s("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>d(r).current_password=c),type:"password",class:f(["w-full h-[44px] bg-white border-2 border-[#d7d7db] rounded-lg p-2 text-base text-gray-800 focus:ring-2 focus:ring-green-500",{"border-red-500":a.value.current_password}])},null,2),[[v,d(r).current_password]]),a.value.current_password?(l(),u("span",X,n(a.value.current_password),1)):b("",!0)]),s("div",null,[i(p,{text:"Nova Senha"}),m(s("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>d(r).password=c),type:"password",class:f(["w-full h-[44px] bg-white border-2 border-[#d7d7db] rounded-lg p-2 text-base text-gray-800 focus:ring-2 focus:ring-green-500",{"border-red-500":a.value.password}])},null,2),[[v,d(r).password]]),a.value.password?(l(),u("span",Y,n(a.value.password),1)):b("",!0)]),s("div",null,[i(p,{text:"Confirmar Nova Senha"}),m(s("input",{"onUpdate:modelValue":e[2]||(e[2]=c=>d(r).password_confirmation=c),type:"password",class:f(["w-full h-[44px] bg-white border-2 border-[#d7d7db] rounded-lg p-2 text-base text-gray-800 focus:ring-2 focus:ring-green-500",{"border-red-500":a.value.password_confirmation}])},null,2),[[v,d(r).password_confirmation]]),a.value.password_confirmation?(l(),u("span",ss,n(a.value.password_confirmation),1)):b("",!0)]),s("div",es,[s("button",{type:"submit",class:"w-full bg-[#6DB631] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#528429] transition-colors",disabled:d(r).processing},n(d(r).processing?"Salvando...":"Atualizar Senha"),9,ts)])])],32)])])]}),_:1}))}},is=M(os,[["__scopeId","data-v-4d2f4795"]]);export{is as default};
