import{l as O,d as c,i as T,k as j,e as g,o as l,a as e,b as u,m as D,f as C,x as z,F,h as K,t as p,A as G,v as V,n as Q,g as H,j as J,c as M,w as W,u as X,Z as Y}from"./app-vGR4VHCP.js";import{L as ee}from"./LayoutFranqueado-Dg4kLBEk.js";import{_ as k}from"./LabelModel-BQtPKLWR.js";import{B as Z}from"./ButtonPrimaryMedio-C9HfT39S.js";import{B as te}from"./ButtonCancelar-DXabxgHh.js";import{C as U}from"./ConfirmDialog-1acut7He.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae={class:"mt-5"},oe={class:"grid grid-cols-2 gap-8"},se={class:"bg-white rounded-lg p-12"},ne={class:"flex gap-4"},re={class:"flex-1 mb-8"},le=["value"],ie={key:0,class:"text-red-500 text-sm"},de={class:"flex-1"},ce={key:0,class:"text-red-500 text-sm"},ue={key:0,class:"text-red-500 text-sm"},ve={class:"col-span-1 row-span-2 mt-12"},ge={class:"text-[#262a27] text-[12px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},me={key:0,class:"text-red-500 text-sm"},pe={key:1,class:"text-red-500 text-sm"},fe={class:"bg-white rounded-lg p-12"},xe={class:"mt-2"},be={class:"mt-2"},_e={for:"arquivo",class:"w-full flex items-center justify-center gap-2 p-4 text-gray-800 bg-[#d9d9d9] rounded-lg cursor-pointer hover:bg-gray-300 focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},ye={key:0,class:"text-red-500 text-sm"},he={class:"form-buttons"},Ce={__name:"CadastroContas",emits:["voltar"],setup(f,{emit:h}){const i=O(),a=c(null),m=c(""),w=c(""),x=c(""),y=c(1),b=c(null),$=c(""),d=c(!1),v=c(""),_=c([]),n=c({}),A=h;T(async()=>{try{const o=await j.get("/api/categorias/seleto-contas");_.value=o.data}catch(o){console.error("Erro ao carregar categorias:",o)}});const B=async()=>{n.value={},b.value||(n.value.categoria="A categoria é obrigatória"),a.value||(n.value.valor="O valor é obrigatório"),w.value||(n.value.emitidaEm="A data emitida é obrigatória"),x.value||(n.value.vencimento="A data de vencimento é obrigatória"),m.value.length>200&&(n.value.descricao="A descrição deve ter no máximo 200 caracteres");const o=parseFloat(a.value.replace("R$","").replace(".","").replace(",",".").trim());if(isNaN(o)?n.value.valor="O valor informado não é válido":a.value=o,Object.keys(n.value).length===0)try{const t=new FormData;if(t.append("categoria_id",b.value),t.append("valor",a.value),t.append("emitida_em",w.value),t.append("vencimento",x.value),t.append("dias_lembrete",y.value),t.append("descricao",m.value),$.value){const E=document.querySelector('input[type="file"]');E.files.length>0&&t.append("arquivo",E.files[0])}const r=await j.post("/api/cursto/contas-a-pagar",t);i.success("Conta cadastrada com sucesso",r.data),console.log("Conta cadastrada com sucesso",r.data),s()}catch(t){i.error("Erro ao cadastrar a conta"),console.error("Erro ao cadastrar a conta",t)}},L=o=>{v.value=o,d.value=!0},I=()=>{B(),d.value=!1},N=()=>{d.value=!1},q=o=>{i.info("Arquivo selecionado com sucesso");const t=o.target.files[0];t&&($.value=t.name)},P=o=>{let t=o.replace(/\D/g,"");t||(t="0");const r=t.slice(0,-2)||"0",E=t.slice(-2);return`R$ ${Number(r).toLocaleString("pt-BR")},${E}`},s=()=>{b.value=null,a.value=null,w.value="",x.value="",y.value=1,m.value="",$.value="",A("voltar")};return(o,t)=>(l(),g(F,null,[t[13]||(t[13]=e("div",{class:"painel-title"},"Cadastrar Contas",-1)),t[14]||(t[14]=e("div",{class:"painel-subtitle"},[e("p",null,"Cadastrar contas a pagar da sua operação")],-1)),e("div",ae,[e("div",oe,[e("div",se,[e("div",ne,[e("div",re,[t[9]||(t[9]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},null,-1)),u(k,{text:"Nome da Conta"}),D(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=r=>b.value=r),name:"categoria",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},[t[8]||(t[8]=e("option",{value:"",selected:""},"Selecione uma categoria",-1)),(l(!0),g(F,null,K(_.value,r=>(l(),g("option",{key:r.id,value:r.id},p(r.nome),9,le))),128))],512),[[z,b.value]]),n.value.categoria?(l(),g("span",ie,p(n.value.categoria),1)):C("",!0)]),e("div",de,[u(k,{text:"Lembrar - me"}),D(e("select",{id:"dias_lembrete","onUpdate:modelValue":t[1]||(t[1]=r=>y.value=r),name:"dias_lembrete",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},t[10]||(t[10]=[G('<option value="1" data-v-a038958e>1 dia antes</option><option value="3" data-v-a038958e>3 dias antes</option><option value="5" data-v-a038958e>5 dias antes</option><option value="15" data-v-a038958e>15 dias antes</option><option value="30" data-v-a038958e>30 dias antes</option>',5)]),512),[[z,y.value]]),n.value.diasLembrete?(l(),g("span",ce,p(n.value.diasLembrete),1)):C("",!0)])]),u(k,{text:"Valor"}),D(e("input",{id:"valor","onUpdate:modelValue":t[2]||(t[2]=r=>a.value=r),onInput:t[3]||(t[3]=r=>a.value=P(a.value)),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']",placeholder:"R$ 0,00"},null,544),[[V,a.value]]),n.value.valor?(l(),g("span",ue,p(n.value.valor),1)):C("",!0),e("div",ve,[e("div",ge,[u(k,{text:"Data emitida"}),D(e("input",{type:"date",id:"emitida_em","onUpdate:modelValue":t[4]||(t[4]=r=>w.value=r),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[V,w.value]]),n.value.emitidaEm?(l(),g("span",me,p(n.value.emitidaEm),1)):C("",!0),t[11]||(t[11]=e("div",{class:"mt-12"},null,-1)),u(k,{text:"Data de vencimento"}),D(e("input",{type:"date",id:"vencimento","onUpdate:modelValue":t[5]||(t[5]=r=>x.value=r),name:"vencimento",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500 font-['Figtree']"},null,512),[[V,x.value]]),n.value.vencimento?(l(),g("span",pe,p(n.value.vencimento),1)):C("",!0)])])]),e("div",fe,[u(k,{text:"Informações adicionais"}),D(e("textarea",{id:"descricao","onUpdate:modelValue":t[6]||(t[6]=r=>m.value=r),class:"w-full h-[170px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500",placeholder:"Detalhes adicionais aqui..."},null,512),[[V,m.value]]),e("p",{class:Q(["text-right text-xs mt-1",{"text-gray-500":m.value.length<=200,"text-red-500":m.value.length>200}])},p(m.value.length)+"/200 caracteres ",3),e("div",xe,[u(k,{text:"Enviar boleto/fatura"}),e("div",be,[e("label",_e,[H(p($.value||"Selecionar Arquivo")+" ",1),t[12]||(t[12]=e("img",{src:"/storage/images/upload.svg",alt:"Upload",class:"w-5 h-5"},null,-1))]),e("input",{type:"file",id:"arquivo",name:"arquivo",class:"hidden",onChange:q},null,32),n.value.arquivo?(l(),g("span",ye,p(n.value.arquivo),1)):C("",!0)])]),e("div",he,[u(te,{class:"w-full",text:"Cancelar",onClick:s}),u(Z,{text:"Cadastrar",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:t[7]||(t[7]=r=>L("Cadastrar um nova conta?"))})])])])]),u(U,{isVisible:d.value,motivo:v.value,onConfirm:I,onCancel:N},null,8,["isVisible","motivo"])],64))}},we=S(Ce,[["__scopeId","data-v-a038958e"]]),$e=["type"],ke={class:"text-center text-[15px] font-semibold font-['Figtree'] leading-tight"},De=["src"],Ve={__name:"ButtonClaroMedio",props:{text:{type:String,required:!0,default:"Nome do Botão"},type:{type:String,default:"button"},iconPath:{type:String,required:!1}},emits:["click"],setup(f,{emit:h}){const i=h,a=()=>{i("click")};return(m,w)=>(l(),g("button",{type:f.type,onClick:a,class:"h-[46px] px-[38px] py-3 rounded-[10px] shadow-[2px_2px_10px_0px_rgba(0,0,0,0.04)] flex justify-center items-center gap-2.5"},[e("span",ke,p(f.text),1),f.iconPath?(l(),g("img",{key:0,src:f.iconPath,alt:"icon",class:"h-6 w-6"},null,8,De)):C("",!0)],8,$e))}},R=S(Ve,[["__scopeId","data-v-3918f9aa"]]),qe={class:"elemento-fixo"},Ee={key:0},Fe={class:"mt-8"},Se={class:"w-full h-[530px] bg-white rounded-[20px] p-7 relative"},Ae={class:"flex justify-between items-center"},Be={class:"text-[25px] font-bold font-['Figtree'] leading-8 tracking-tight"},Le={class:"text-[#6db631] text-xl font-normal font-['Figtree'] leading-[25px] tracking-tight"},Ie={class:"col-span-1 row-span-2 mt-8"},Ne={class:"col-span-1 row-span-2 mt-8"},Pe={class:"text-[#262a27] text-[12px] font-bold leading-[48px] tracking-wide"},je=["value"],Ue=["value"],ze={class:"w-full h-[100px] bg-white border-gray-300 rounded-lg border-2 border-[#d7d7db] px-2 py-1 text-[14px] outline-none resize-none focus:ring-2 focus:ring-green-500"},Me={class:"flex space-x-4 mt-5"},Re={__name:"DetalhesContasApagar",props:{dados:{type:Object,required:!0}},emits:["voltar","atualiza"],setup(f,{emit:h}){const i=O(),a=f,m=h,w=c(!1);c(null);const x=c(!1),y=c(!1),b=c(""),$=s=>{b.value=s,x.value=!0},d=s=>{b.value=s,y.value=!0},v=s=>s==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg",_=s=>s==="pendente"?"text-[#FF9500] w-full bg-[#f4faf4] hover:bg-[#ffdeb1] transition duration-200 ease-in-out":"text-[#6db631] w-full bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out ",n=()=>{x.value=!1,I()},A=()=>{x.value=!1},B=()=>{y.value=!1,N()},L=()=>{y.value=!1},I=async()=>{if(!a.dados||!a.dados.id){i.error("Erro: Dados da conta não encontrados.");return}try{const s=await axios.post(`/api/cursto/contas-a-pagar/${a.dados.id}/pagar`);i.success(s.data.message),a.dados.status="pago",m("atualiza")}catch(s){console.error("Erro ao pagar a conta:",s),i.error("Erro ao pagar a conta")}},N=async s=>{if(!a.dados||!a.dados.id){i.error("Erro: Dados da conta não encontrados.");return}try{const o=await axios.delete(`/api/cursto/contas-a-pagar/${a.dados.id}`);i.success("Conta excluída com sucesso"),m("voltar")}catch(o){console.error("Erro ao excluir a conta:",o)}},q=s=>{if(!s)return"";const o=s.split("-");return`${o[2]}/${o[1]}/${o[0]}`},P=()=>{if(a.dados.arquivo){const s=document.createElement("a");s.href=`/${a.dados.arquivo}`,s.download=a.dados.arquivo.split("/").pop(),s.target="_blank",s.click(),i.info("Arquivo baixado com sucesso")}else i.warning("Arquivo não encontrado"),console.error("Arquivo não encontrado")};return(s,o)=>(l(),g(F,null,[e("div",qe,[w.value?C("",!0):(l(),g("div",Ee,[e("div",Fe,[e("div",Se,[e("div",Ae,[e("p",Be,p(f.dados.nome),1),e("button",{class:"text-gray-500 hover:text-red-600",onClick:o[0]||(o[0]=t=>d("Excluir essa conta?"))},o[2]||(o[2]=[e("img",{src:"/storage/images/delete.svg",alt:"Excluir",class:"w-6 h-6"},null,-1)]))]),e("p",Le,p(f.dados.valor_formatado),1),o[4]||(o[4]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1)),e("div",Ie,[e("div",Ne,[e("div",Pe,[u(k,{text:"Data emitida"}),e("input",{type:"text",id:"emitida_em",value:q(f.dados.emitida_em),name:"emitida_em",class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,je),o[3]||(o[3]=e("div",{class:"mt-12"},null,-1)),u(k,{text:"Data de vencimento"}),e("input",{type:"text",id:"vencimento",name:"vencimento",value:q(f.dados.vencimento),class:"w-full py-2 bg-transparent border border-gray-300 rounded-lg outline-none text-base text-center text-gray-700 focus:ring-2 focus:ring-green-500",readonly:""},null,8,Ue)])]),u(k,{text:"Informações adicionais"}),e("p",ze,p(f.dados.descricao),1)]),e("div",Me,[u(R,{text:a.dados.status==="pendente"?"Pagar":"Pago",class:Q(_(a.dados.status)),onClick:o[1]||(o[1]=t=>$("Marca como paga essa conta?")),iconPath:v(a.dados.status),disabled:a.dados.status==="pago"},null,8,["text","class","iconPath","disabled"]),u(R,{text:"Baixar boleto",class:"text-[#6db631] w-full bg-[#f4faf4] hover:bg-[#c1fab6] transition duration-200 ease-in-out",onClick:P})])])])]))]),u(U,{isVisible:x.value,motivo:b.value,onConfirm:n,onCancel:A},null,8,["isVisible","motivo"]),u(U,{isVisible:y.value,motivo:b.value,onConfirm:B,onCancel:L},null,8,["isVisible","motivo"])],64))}},Oe=S(Re,[["__scopeId","data-v-ac2a3a8f"]]),Te={class:"search-container relative flex items-center w-full mb-4"},Ke=["onClick"],Qe={class:"text-lg font-medium text-gray-900"},Ze={class:"text-sm text-gray-600"},Ge=["src","alt"],He={__name:"ListarContasApagar",emits:["dado-selecionado"],setup(f,{emit:h}){const i=h,a=c([]),m=c("");T(async()=>{try{const d=await j.get("/api/cursto/listar-contas-a-pagar");a.value=d.data.data}catch(d){console.error("Erro ao carregar os dados:",d)}});const x=d=>{i("dado-selecionado",d)},y=J(()=>{const d=m.value.toLowerCase();return a.value.filter(v=>v.nome.toLowerCase().includes(d)||String(v.valor).includes(d))}),b=d=>{const v=d.split("-");return`${v[2]}/${v[1]}/${v[0]}`},$=d=>d==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(d,v)=>(l(),g("div",null,[v[2]||(v[2]=e("div",{class:"painel-title"},"Contas a pagar",-1)),v[3]||(v[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Compromissos financeiros do mês vigente")],-1)),e("div",Te,[v[1]||(v[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":v[0]||(v[0]=_=>m.value=_),placeholder:"Buscar contas",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[V,m.value]])]),(l(!0),g(F,null,K(y.value,_=>(l(),g("div",{key:_.id,onClick:n=>x(_),class:"flex justify-between items-center bg-white p-4 rounded-lg cursor-pointer hover:bg-gray-100 transition mt-3"},[e("div",null,[e("p",Qe,p(_.nome),1),e("p",Ze,p(_.valor_formatado)+" - Vence em "+p(b(_.vencimento)),1)]),e("div",null,[e("img",{src:$(_.status),alt:_.status,class:"w-8 h-8"},null,8,Ge)])],8,Ke))),128))]))}},Je=S(He,[["__scopeId","data-v-772e3fb2"]]),We={key:0,class:"fixed bottom-6 right-6"},Xe={key:1,class:"mt-3"},Ye={key:2,class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3 h-full"},et={key:0},it={__name:"Index",setup(f){const h=c(0),i=c(null),a=c(!1),m=()=>{a.value=!a.value,a.value&&(i.value=null)},w=$=>{i.value=$},x=()=>{a.value=!1,h.value+=1,console.log("cancelarCadastro")},y=()=>{i.value=null,h.value+=1},b=()=>{h.value+=1};return($,d)=>(l(),M(ee,null,{default:W(()=>[u(X(Y),{title:"Contas"}),a.value?C("",!0):(l(),g("div",We,[u(Z,{text:"Cadastrar nova conta",class:"w-full",iconPath:"/storage/images/arrow_left_alt.svg",onClick:m})])),a.value?(l(),g("div",Xe,[u(we,{onVoltar:x,onAtualiza:b})])):C("",!0),a.value?C("",!0):(l(),g("div",Ye,[(l(),M(Je,{key:h.value,ref:"listaDados",onDadoSelecionado:w})),i.value?(l(),g("div",et,[u(Oe,{dados:i.value,onVoltar:y},null,8,["dados"])])):C("",!0)]))]),_:1}))}};export{it as default};
