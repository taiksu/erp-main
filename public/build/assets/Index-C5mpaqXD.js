import{d as o,e as u,o as d,a as t,t as n,i as T,c as Y,w as z,b as j,u as O,Z,F as W,h as G,f as H,g as c}from"./app-vGR4VHCP.js";import{d as J}from"./index-CWjNdAPT.js";import{C as D,r as K}from"./chart-D2B5U74o.js";import{L as Q}from"./LayoutFranqueado-Dg4kLBEk.js";import{d as I}from"./dayjs.min-CqG6kpIn.js";import"./pt-br-D1Z5XoE6.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X={class:"relative"},tt={class:"flex items-center justify-center rounded-md"},et={class:"font-semibold text-lg"},st={__name:"CalendarSimples",setup(V){I.locale("pt-br");const p=o(I());return(m,g)=>(d(),u("div",X,[t("div",tt,[t("span",et,n(p.value.format("MMMM YYYY")),1)])]))}},at={class:"flex justify-between items-center mb-4"},ot={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},lt={class:"flex items-center space-x-2"},nt={class:"text-gray-900 text-[17px] font-semibold"},it={class:"mt-5"},rt={class:"grid grid-cols-3 grid-rows-1 gap-4"},dt={class:"row-span-3"},ct={class:"bg-white rounded-lg p-5 h-full w-full"},ut={class:"compromissos-container flex flex-col gap-2 overflow-hidden"},pt={class:"flex flex-col"},mt={class:"text-[14px] font-medium text-gray-900"},gt={class:"text-sm text-gray-600"},ft=["src","alt"],xt={class:"bg-white rounded-lg p-7"},vt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},bt={class:"bg-white rounded-lg p-7"},_t={class:"flex items-center mb-4"},ht={xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 24 24",style:{fill:"rgba(0, 0, 0, 1)",transform:"msfilter"}},yt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},wt={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},Ft={class:"bg-white rounded-lg p-7 w-[350px] shadow-lg"},Ct={class:"text-sm text-gray-600 space-y-2"},kt={class:"text-lg font-bold text-gray-900 mt-3"},$t={class:"bg-white rounded-lg p-7"},Mt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},jt={class:"bg-white rounded-lg p-4"},Dt={class:"text-[#262a27] text-[40px] font-bold font-['Figtree'] leading-[48px] tracking-wide"},It={class:"bg-white rounded-lg p-4 col-span-3"},Vt={class:"w-full h-[220px]"},Et={__name:"Index",setup(V){D.register(...K);const p=o(null),m=o(null),g=o([]),v=o([]),b=o([]),_=o("0,00"),h=o("0,00"),y=o("0,00"),w=o("0,00"),F=o("0,00"),f=o("0,00"),C=o("0,00"),k=o(0),$=o("0,00"),x=o(!1),E=()=>{J.Inertia.replace(route("franqueado.contasApagar"))},A=()=>{x.value=!0},S=()=>{x.value=!1},q=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-cmv";const i=[];s&&i.push(`start_date=${s}`),e&&i.push(`end_date=${e}`),i.length>0&&(a+=`?${i.join("&")}`);const l=(await axios.get(a)).data;l.saldo_estoque_inicial?(_.value=l.start_date||"não informado",h.value=l.end_date||"não informado",y.value=l.saldo_estoque_inicial||"0,00",w.value=l.entradas_durante_periodo||"0,00",F.value=l.saldo_estoque_final||"0,00",f.value=l.cmv||"0,00"):console.warn("Dados analíticos não encontrados.")}catch(a){console.error("Erro ao buscar dados analíticos:",a)}},R=async(s=null,e=null)=>{try{let a="/api/painel-analitycos/calcular-fluxo-caixa";const i=[];s&&i.push(`start_date=${s}`),e&&i.push(`end_date=${e}`),i.length>0&&(a+=`?${i.join("&")}`);const l=(await axios.get(a)).data;C.value=l.total_caixas||"0,00",k.value=l.quantidade_pedidos||0,$.value=l.ticket_medio||"0,00"}catch(a){console.error("Erro ao buscar dados analíticos:",a)}};T(()=>{q(),R(),P(),B(),M()});const P=async()=>{try{const s=await axios.get("/api/cursto/listar-contas-a-pagar");b.value=s.data.data}catch(s){console.error("Erro ao carregar os dados:",s)}},B=async()=>{try{const e=(await axios.get("/api/painel-analitycos/faturamento-por-dia-mes")).data,a=new Date().getMonth()+1,i=Object.values(e.faturamento).filter(r=>(parseInt(r.dia)<=new Date().getDate()?a:a-1)===a).sort((r,l)=>r.dia-l.dia);Array.isArray(i)?(v.value=i.map(r=>r.dia),g.value=i.map(r=>parseFloat(r.total)),M()):console.error("Erro: Os dados recebidos não estão no formato esperado.",e)}catch(s){console.error("Erro ao buscar dados:",s)}},M=()=>{m.value&&m.value.destroy(),m.value=new D(p.value.getContext("2d"),{type:"bar",data:{labels:v.value,datasets:[{label:"Faturamento Diário",data:g.value,backgroundColor:"rgba(75, 192, 75, 0.6)",borderColor:"rgba(75, 192, 75, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,ticks:{callback:function(s){return s>=1e3?`${s/1e3} mil`:s}}}}}})},L=s=>{const e=s.split("-");return`${e[2]}/${e[1]}/${e[0]}`},N=s=>s==="pendente"?"/storage/images/check_circle_laranja.svg":"/storage/images/check_circle_verde.svg";return(s,e)=>(d(),Y(Q,null,{default:z(()=>[j(O(Z),{title:"Painel"}),t("div",at,[e[1]||(e[1]=t("div",null,[t("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Visão geral da loja "),t("div",{class:"painel-subtitle"},[t("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe o desempenho geral ")])],-1)),t("div",ot,[t("div",lt,[e[0]||(e[0]=t("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),t("span",nt,[j(st)])])])]),t("div",it,[t("div",rt,[t("div",dt,[t("div",ct,[e[2]||(e[2]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-2"}," Compromissos ",-1)),t("div",ut,[(d(!0),u(W,null,G(b.value,a=>(d(),u("div",{key:a.id,onClick:E,class:"flex justify-between items-center bg-[#F5FAF4] p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-all ease-in-out duration-300"},[t("div",pt,[t("p",mt,n(a.nome),1),t("p",gt,n(a.valor_formatado)+" - Vencimento "+n(L(a.vencimento)),1)]),t("div",null,[t("img",{src:N(a.status),alt:"Status: "+a.status,class:"w-6 h-6 object-contain transition-transform transform hover:scale-105"},null,8,ft)])]))),128))])])]),t("div",xt,[e[3]||(e[3]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Faturamento",-1)),t("div",vt," R$ "+n(C.value),1),e[4]||(e[4]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",bt,[t("div",_t,[e[6]||(e[6]=t("h3",{class:"text-lg font-semibold text-gray-700"},"CMV",-1)),t("button",{onClick:A,class:"ml-2"},[(d(),u("svg",ht,e[5]||(e[5]=[t("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1)])))])]),t("div",yt," R$ "+n(f.value),1),e[14]||(e[14]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1)),x.value?(d(),u("div",wt,[t("div",Ft,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"}," Detalhes do CMV ",-1)),t("div",Ct,[t("p",null,[e[7]||(e[7]=t("span",{class:"font-semibold text-gray-800"},"Período:",-1)),c(" "+n(_.value)+" - "+n(h.value),1)]),t("p",null,[e[8]||(e[8]=t("span",{class:"font-semibold text-gray-800"}," Saldo Inicial: ",-1)),c(" R$ "+n(y.value),1)]),t("p",null,[e[9]||(e[9]=t("span",{class:"font-semibold text-gray-800"},"Entradas:",-1)),c(" R$ "+n(w.value),1)]),t("p",null,[e[10]||(e[10]=t("span",{class:"font-semibold text-gray-800"},"Saldo Final:",-1)),c(" R$ "+n(F.value),1)]),t("p",kt,[e[11]||(e[11]=t("span",{class:"font-semibold"},"CMV:",-1)),c(" R$ "+n(f.value),1)]),e[12]||(e[12]=t("p",null," Parametros: Saldo Inicial + Entradas nesse periodo - Saldo Final = Total CMV ",-1))]),t("button",{onClick:S,class:"mt-4 text-red-800 rounded-md transition"}," Fechar ")])])):H("",!0)]),t("div",$t,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Ticket médio",-1)),t("div",Mt," R$ "+n($.value),1),e[16]||(e[16]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",jt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-4"},"Pedidos",-1)),t("div",Dt,n(k.value),1),e[18]||(e[18]=t("div",{class:"flex items-center gap-2 mt-[35px]"},[t("div",{class:"w-6 h-6 rounded-full flex items-center justify-center"}),t("div",{class:"text-[#6d6d6d] text-[13px] font-semibold font-['Figtree'] leading-[18px]"}," 0% coletando dados ")],-1))]),t("div",It,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-700"}," Faturamento diário ",-1)),t("div",Vt,[t("canvas",{ref_key:"barChart",ref:p},null,512)])])])])]),_:1}))}},Nt=U(Et,[["__scopeId","data-v-0e77f44b"]]);export{Nt as default};
