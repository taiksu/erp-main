import{L as $}from"./LayoutFranqueado-Dg4kLBEk.js";import{d as p,i as L,j as k,e as d,o as a,a as e,m as N,v as A,F as b,h as D,t as i,k as B,f as y,c as h,w as q,b as C,u as S,Z as P}from"./app-vGR4VHCP.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"search-container relative flex items-center w-full mb-4"},j=["onClick"],E={class:"w-[110.73px] h-[24.32px] text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},H={class:"text-[20px]"},I={class:"w-[400px] h-[17.68px] text-[#6d6d6d] text-[13px] font-medium font-['Figtree'] leading-[20px]"},M={__name:"ListadoHistoricoPedido",emits:["dado-selecionado"],setup(x,{emit:_}){const f=_,l=p([]),c=p("");L(async()=>{try{const r=await B.get("/api/historico/lista");l.value=Object.values(r.data)}catch(r){console.error("Erro ao carregar os dados:",r)}});const v=r=>{f("dado-selecionado",r)},g=k(()=>{const r=c.value.toLowerCase();return l.value.filter(t=>String(t.id).toLowerCase().includes(r)||t.fornecedor_nome.toLowerCase().includes(r))});return k(()=>g.value.slice().sort((r,t)=>t.id-r.id)),(r,t)=>(a(),d("div",null,[t[2]||(t[2]=e("div",{class:"painel-title"},"Histórico de pedidos",-1)),t[3]||(t[3]=e("div",{class:"painel-subtitle"},[e("p",null,"Visualize pedidos já realizados com fornecedores")],-1)),e("div",R,[t[1]||(t[1]=e("div",{class:"absolute left-3"},[e("img",{src:"/storage/images/search.svg",alt:"Ícone de pesquisa",class:"w-5 h-5 text-gray-500"})],-1)),N(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),placeholder:"Buscar de pedidos",class:"search-input pl-10 w-full py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[A,c.value]])]),(a(!0),d(b,null,D(g.value,o=>(a(),d("div",{key:o.id,onClick:s=>v(o),class:"w-full h-[63px] p-3 mt-4 px-[30px] bg-white rounded-[10px] shadow-[0px_0px_1px_0px_rgba(142,142,142,0.08)] cursor-pointer"},[e("div",E,[e("p",H,"# "+i(o.id),1)]),e("div",I,i(o.fornecedor_nome),1)],8,j))),128))]))}},T=w(M,[["__scopeId","data-v-0d7a3afb"]]),V={class:"elemento-fixo"},Q={key:0},U={class:"mt-8"},z={class:"flex justify-between w-full h-[24.32px] text-[#262a27] text-[42px] font-semibold font-['Figtree'] leading-[12px]"},K={class:"flex justify-between w-full h-[17.68px] text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},O={class:"w-[250px]"},G={class:"w-[250px] text-right font-semibold"},Z={class:"min-w-full table-auto"},J=["onDblclick"],W={class:"px-6 py-4 text-[16px] text-left text-gray-900 font-semibold"},X={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},Y={class:"px-6 py-4 text-[16px] text-gray-900 font-semibold text-center"},ee={key:0},te={key:1},se={class:"px-6 py-4 text-[16px] text-gray-500 text-center"},oe={__name:"DetalhesHistoricoPedidos",props:{dados:{type:Object,required:!0}},emits:["atualizar"],setup(x,{emit:_}){const f=x,l=p(!1),c=p(null),m=t=>{c.value=t},v=t=>{const o=Array.isArray(t.valor_unitario)?t.valor_unitario.reduce((u,n)=>u+n,0):parseFloat(t.valor_unitario),s=Array.isArray(t.quantidade)?t.quantidade.reduce((u,n)=>u+n,0):parseFloat(t.quantidade);return isNaN(o)||isNaN(s)?0:o*s},g=t=>parseFloat(t.valor_unitario),r=(t,o)=>{const s=Array.isArray(t)?t.reduce((u,n)=>u+n,0):parseFloat(t)||0;return o==="a_granel"?Number(s).toLocaleString("pt-BR",{minimumFractionDigits:3,maximumFractionDigits:3}):Number(s).toLocaleString("pt-BR",{maximumFractionDigits:0})};return(t,o)=>(a(),d("div",V,[l.value?y("",!0):(a(),d("div",Q,[e("div",U,[e("div",z,[e("p",null,"# "+i(x.dados.id),1),o[0]||(o[0]=e("p",{class:"text-[#6d6d6d] text-[15px] font-medium font-['Figtree'] leading-[20px]"},null,-1))]),e("div",K,[e("div",O,i(x.dados.fornecedor_nome),1),e("div",G,i(x.dados.created_at),1)]),e("table",Z,[o[1]||(o[1]=e("thead",null,[e("tr",null,[e("th",{class:"px-6 py-3 text-xs text-left font-medium text-gray-500 uppercase tracking-wider TrRedonEsquerda"}," Item "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," QTD. "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," V. UN/KG "),e("th",{class:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider"}," TOTAL ")])],-1)),e("tbody",null,[(a(!0),d(b,null,D(f.dados.itens_id,(s,u)=>(a(),d("tr",{key:s.id,onDblclick:n=>m(u)},[e("td",W,i(s.nome),1),e("td",X,[e("span",null,i(r(s.quantidade,s.unidadeDeMedida))+" "+i(s.unidadeDeMedida==="a_granel"?"KG":"UN"),1)]),e("td",Y,[s.unidadeDeMedida==="a_granel"?(a(),d("span",ee," R$ "+i(g(s).toFixed(2)),1)):(a(),d("span",te," R$ "+i(Array.isArray(s.valor_unitario)?s.valor_unitario.reduce((n,F)=>n+F,0).toFixed(2):s.valor_unitario.toFixed(2)),1))]),e("td",se,[e("span",null,i(v(s).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})),1)])],40,J))),128))])])])]))]))}},ae=w(oe,[["__scopeId","data-v-b97f37f1"]]),re={class:"grid grid-cols-1 gap-[3rem] mt-3 sm:grid-cols-2 card-container h-full overflow-hidden"},ie={key:0},de={class:"flex flex-col gap-4"},ne={__name:"Index",setup(x){const _=p(null),f=p(0),l=p(!1),c=m=>{_.value=m};return(m,v)=>(a(),h($,null,{default:q(()=>[C(S(P),{title:"Histórico de Pedidos"}),e("div",re,[l.value?y("",!0):(a(),d("div",ie,[(a(),h(T,{key:f.value,ref:"listaDados",onDadoSelecionado:c}))])),e("div",de,[l.value?y("",!0):(a(),d(b,{key:0},[_.value?(a(),h(ae,{key:0,dados:_.value},null,8,["dados"])):y("",!0)],64))])])]),_:1}))}},pe=w(ne,[["__scopeId","data-v-b9a5baa2"]]);export{pe as default};
