import{d as r,j as D,i as M,c as N,o as d,w as S,b as V,a as e,u as A,Z as E,e as c,n as H,t as n,F as $,h as B,f as I,g as p,m,v,k as P}from"./app-vGR4VHCP.js";import{L as R}from"./LayoutFranqueado-Dg4kLBEk.js";import{_ as T}from"./CalendarSimples2-I5OwyRRx.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CqG6kpIn.js";import"./pt-br-D1Z5XoE6.js";const z={class:"flex justify-between items-center mb-4"},K={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Q={class:"flex items-center space-x-2"},Z={class:"text-gray-900 text-[17px] font-semibold"},G={class:"mt-5"},J={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4"},O={class:"bg-white rounded-lg p-7"},W={class:"flex items-center -mt-9"},X={class:"w-[40px] h-[40px] ml-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Y=["points","fill"],ee={class:"bg-white rounded-lg p-7"},se={class:"flex flex-col gap-2 compromissos-container"},te={class:"flex items-center gap-3"},oe={class:"text-[14px] font-medium text-gray-900"},le=["src"],ae={class:"text-sm text-[#262a27]"},re={class:"text-[17px] font-semibold text-gray-900"},ne={class:"mt-8"},ie={class:"bg-white rounded-lg shadow"},de={class:"bg-[#164110] grid grid-cols-7 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},pe={key:0,class:"grid grid-cols-7 gap-4 py-2 px-6 bg-gray-50"},ue={class:"overflow-y-auto max-h-96 scroll-hidden"},ce={class:"space-y-1"},me={class:"flex items-center justify-center text-gray-900 font-semibold"},ve={class:"w-[25px] h-[25px] mr-2",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ge=["points","fill"],xe={class:"text-gray-900 font-semibold"},fe={class:"text-gray-900 font-semibold"},be={class:"text-gray-900 font-semibold"},_e={class:"text-gray-900 font-semibold"},ye={class:"text-gray-600 font-semibold"},we={class:"text-gray-500 font-semibold"},Fe={__name:"Index",setup(he){r(""),r("");const g=r(0),w=r([]),F=r([]);r(!1),r(null);const b=r(null),_=r(!0),y=r(!1),o=r({aproveitamento:"","calibre.nome":"",peso_limpo:"",peso_bruto:"",desperdicio:"",created_at:"","responsavel.name":""}),i=l=>!l||typeof l!="string"?0:parseFloat(l.replace(/[^\d,.]/g,"").replace(",","."))||0,L=D(()=>F.value.filter(l=>(o.value.aproveitamento===""||String(l.aproveitamento).includes(o.value.aproveitamento))&&(o.value["calibre.nome"]===""||l.calibre.nome.toLowerCase().includes(o.value["calibre.nome"].toLowerCase()))&&(o.value.peso_limpo===""||String(l.peso_limpo).includes(o.value.peso_limpo))&&(o.value.peso_bruto===""||String(l.peso_bruto).includes(o.value.peso_bruto))&&(o.value.desperdicio===""||String(l.desperdicio).includes(o.value.desperdicio))&&(o.value.created_at===""||l.created_at.toLowerCase().includes(o.value.created_at.toLowerCase()))&&(o.value["responsavel.name"]===""||l.responsavel.name.toLowerCase().includes(o.value["responsavel.name"].toLowerCase()))).sort((l,s)=>{if(b.value){const t=b.value.split(".");let a=l,x=s;t.forEach(k=>{a=a[k],x=x[k]});const f=typeof a=="string"?i(a):a,C=typeof x=="string"?i(x):x;return _.value?f>C?1:-1:f<C?1:-1}return 0})),u=l=>{b.value===l?_.value=!_.value:(b.value=l,_.value=!0)},U=()=>{y.value=!y.value},h=async(l=null,s=null)=>{try{let t="/api/gestao-residuos/listar";const a=[];l&&a.push(`start_date=${l}`),s&&a.push(`end_date=${s}`),a.length>0&&(t+=`?${a.join("&")}`);const f=(await P.get(t)).data;g.value=f.aproveitamento_medio,w.value=f.colaboradores_eficientes,F.value=f.historico}catch(t){console.error("Erro ao buscar histórico de salmão:",t)}};M(()=>{h()});const j=l=>{h(l.startDate,l.endDate)};return(l,s)=>(d(),N(R,null,{default:S(()=>[V(A(E),{title:"Controle de Resíduos"}),e("div",z,[s[15]||(s[15]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Controle de Resíduos "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe o aproveitamento de insumos ")])],-1)),e("div",K,[e("div",Q,[s[14]||(s[14]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",Z,[V(T,{onUpdateFilters:j})])])])]),e("div",G,[e("div",J,[e("div",O,[s[16]||(s[16]=e("p",{class:"font-semibold text-[#6d6d6d] text-[15px] leading-none"}," Aproveitamento médio ",-1)),e("div",W,[e("span",{class:H({"font-bold text-[120.01px] tracking-wider":!0,"text-[#1d5915]":i(g.value)>=70,"text-red-600":i(g.value)<70})},n(g.value)+"% ",3),(d(),c("svg",X,[e("polygon",{points:i(g.value)>=70?"12,2 22,20 2,20":"12,22 22,2 2,2",fill:i(g.value)>=70?"#6DB631":"#DC2626"},null,8,Y)]))]),s[17]||(s[17]=e("div",{class:"flex items-center gap-2 text-[#6d6d6d] text-[15px] font-semibold -mt-9"},[e("p",null,"0% coletando informações")],-1))]),e("div",ee,[s[18]||(s[18]=e("h3",{class:"font-semibold text-[#6d6d6d] text-[15px] mb-2"}," Eficiência por colaborador ",-1)),e("div",se,[(d(!0),c($,null,B(w.value,(t,a)=>(d(),c("div",{key:t.responsavel_id,class:"flex justify-between items-center bg-[#F5FAF4] px-5 py-2 rounded-lg hover:bg-gray-100 transition-all duration-300"},[e("div",te,[e("p",oe," #"+n(a+1),1),e("img",{src:t.responsavel.profile_photo_path||"/storage/images/default-profile.png",alt:"Foto de perfil",class:"w-8 h-8 rounded-full object-cover border border-gray-300"},null,8,le),e("p",ae,n(t.responsavel.name),1)]),e("div",re,n(t.media_aproveitamento)+"% ",1)]))),128))])])])]),e("div",ne,[e("div",{class:"flex items-center justify-between mb-4"},[s[20]||(s[20]=e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações ",-1)),e("div",{class:"flex items-center space-x-2 cursor-pointer",onClick:U},s[19]||(s[19]=[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"},null,-1),e("span",{class:"text-gray-900 text-[17px] font-semibold"}," Filtrar resultados ",-1)]))]),e("div",ie,[e("div",de,[e("span",{onClick:s[0]||(s[0]=t=>u("aproveitamento")),class:"px-5 cursor-pointer flex items-center gap-2"},s[21]||(s[21]=[p(" Aproveitamento "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[1]||(s[1]=t=>u("calibre.nome")),class:"cursor-pointer flex items-center gap-2"},s[22]||(s[22]=[p(" Calibre "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[2]||(s[2]=t=>u("peso_bruto")),class:"cursor-pointer flex items-center gap-2"},s[23]||(s[23]=[p(" Peso Bruto "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[3]||(s[3]=t=>u("peso_limpo")),class:"flex items-center gap-2 cursor-pointer"},s[24]||(s[24]=[p(" Peso Limpo "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[4]||(s[4]=t=>u("desperdicio")),class:"cursor-pointer flex items-center gap-2"},s[25]||(s[25]=[p(" Desperdício "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[5]||(s[5]=t=>u("created_at")),class:"cursor-pointer flex items-center gap-2"},s[26]||(s[26]=[p(" Quando "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)])),e("span",{onClick:s[6]||(s[6]=t=>u("responsavel.name")),class:"cursor-pointer flex items-center gap-2"},s[27]||(s[27]=[p(" Responsável "),e("img",{src:"/storage/images/sync_alt.svg",class:"w-[19px] h-[19px]"},null,-1)]))]),y.value?(d(),c("div",pe,[m(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.aproveitamento=t),type:"text",placeholder:"Filtrar aproveitamento",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value.aproveitamento]]),m(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>o.value["calibre.nome"]=t),type:"text",placeholder:"Filtrar calibre",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value["calibre.nome"]]]),m(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>o.value.peso_bruto=t),type:"text",placeholder:"Filtrar peso bruto",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value.peso_bruto]]),m(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.peso_limpo=t),type:"text",placeholder:"Filtrar peso limpo",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value.peso_limpo]]),m(e("input",{"onUpdate:modelValue":s[11]||(s[11]=t=>o.value.desperdicio=t),type:"text",placeholder:"Filtrar desperdício",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value.desperdicio]]),m(e("input",{"onUpdate:modelValue":s[12]||(s[12]=t=>o.value.created_at=t),type:"text",placeholder:"Filtrar data",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value.created_at]]),m(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>o.value["responsavel.name"]=t),type:"text",placeholder:"Filtrar responsável",class:"p-2 border border-gray-300 rounded text-sm"},null,512),[[v,o.value["responsavel.name"]]])])):I("",!0),e("div",ue,[e("ul",ce,[(d(!0),c($,null,B(L.value,(t,a)=>(d(),c("li",{key:a,class:"grid grid-cols-7 gap-4 px-6 py-2 text-[16px]"},[e("span",me,[(d(),c("svg",ve,[e("polygon",{points:i(t.aproveitamento)>=70?"12,2 22,20 2,20":"12,22 22,2 2,2",fill:i(t.aproveitamento)>=70?"#6DB631":"#DC2626"},null,8,ge)])),p(" "+n(t.aproveitamento),1)]),e("span",xe,n(t.calibre.nome),1),e("span",fe,n(t.peso_bruto),1),e("span",be,n(t.peso_limpo),1),e("span",_e,n(t.desperdicio),1),e("span",ye,n(t.created_at),1),e("span",we,n(t.responsavel.name),1)]))),128))])])])])]),_:1}))}},Ue=q(Fe,[["__scopeId","data-v-8bba72f5"]]);export{Ue as default};
