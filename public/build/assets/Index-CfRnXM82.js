import{l as k,Q as F,d as n,j as I,i as B,c as j,o as l,w as D,b as p,e as d,f as V,a as e,u as $,Z as N,t as c,g as f,m as P,v as q,n as L,k as m}from"./app-vGR4VHCP.js";import{L as A}from"./LayoutFranqueado-Dg4kLBEk.js";import{B as E}from"./ButtonPrimaryMedio-C9HfT39S.js";import{d as g}from"./index-CWjNdAPT.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={key:0,class:"loading-overlay"},T={class:"mt-5"},O={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-6"},U={key:0,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},z={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},Q={class:"text-[#6db631]"},S={key:1,class:"w-[427px] h-[174px] px-11 py-9 bg-white rounded-[10px] flex flex-col justify-center items-start"},Z={class:"text-[17px] font-semibold font-['Figtree'] leading-snug"},G={class:"text-[#6db631]"},H={class:"text-[#262a27] text-[50px] font-bold font-['Figtree'] leading-[69.98px] tracking-wide"},J={class:"w-[427px] h-[43px] flex justify-center items-center"},K={class:"px-4 py-2 flex justify-center items-center opacity-80"},W={class:"text-[#262a27] text-xl font-bold font-['Figtree'] leading-[25px] tracking-tight"},X={class:"w-full"},Y={class:"fixed bottom-4 right-4"},aa={__name:"Index",setup(ea){var v;const i=k(),{errors:ta,auth:b}=F().props,u=n(((v=b.user)==null?void 0:v.name)||"Usuário"),s=n(""),o=n(!1),x=t=>{let a=t.replace(/\D/g,"");return a.length>2&&(a=a.replace(/(\d)(\d{2})$/,"$1,$2")),a=a.replace(/\B(?=(\d{3})+(?!\d))/g,"."),a},_=t=>{let a=t.target.value;a=x(a),s.value=a},y=t=>t/100,w=I(()=>x(s.value)),h=async()=>{o.value=!0;const t=parseInt(s.value.replace(/\D/g,""),10)||0,a=y(t);if(!t||a<=0){i.warning("Por favor, insira um valor válido para abrir o caixa."),o.value=!1;return}try{const r=await m.post("/api/caixas/abrir",{valor_inicial:a});i.success(`Caixa aberto com sucesso! Valor inicial: R$ ${a.toFixed(2)}`),console.log(r.data),g.Inertia.visit(route("franqueado.fluxoCaixa"))}catch(r){console.error(r),i.error("Ocorreu um erro ao abrir o caixa.")}finally{o.value=!1}},C=async()=>{o.value=!0;try{const t=await m.get("/api/caixas/abertos");t.data&&t.data.aberto&&(i.info("O caixa já esta aberto."),g.Inertia.visit(route("franqueado.fluxoCaixa")))}catch(t){console.error("Erro ao verificar caixa aberto:",t)}finally{o.value=!1}};return B(()=>{C()}),(t,a)=>(l(),j(A,null,{default:D(()=>[p($(N),{title:"Fluxo do Caixa "}),o.value?(l(),d("div",R,a[1]||(a[1]=[e("div",{class:"spinner"},null,-1)]))):V("",!0),a[8]||(a[8]=e("div",{class:"flex justify-between items-center mb-4"},[e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Abertura de caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Iniciar a operação de faturamento diário ")])])],-1)),e("div",T,[e("div",O,[s.value?(l(),d("div",S,[e("div",Z,[e("span",G,c(u.value),1),a[3]||(a[3]=e("span",{class:"text-[#6d6d6d]"},", vamos abrir o caixa com",-1))]),e("div",H,c(w.value),1),a[4]||(a[4]=e("div",{class:"text-[#6d6d6d] text-[17px] font-semibold font-['Figtree'] leading-snug"}," de saldo em gaveta ",-1))])):(l(),d("div",U,[e("div",z,[e("span",Q,c(u.value),1),a[2]||(a[2]=e("span",{class:"text-[#6d6d6d]"},[f(" , com quantos reais "),e("br"),f(" você vai abrir o caixa? ")],-1))])])),e("div",J,[a[5]||(a[5]=e("div",{class:"w-6 h-6"},[e("img",{src:"/storage/images/payments_bleck.svg",alt:""})],-1)),a[6]||(a[6]=e("div",{class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug ml-2"}," Valor em gaveta ",-1)),a[7]||(a[7]=e("div",{class:"flex-grow h-7"},null,-1)),e("div",K,[e("div",W,[e("div",X,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),onInput:_,type:"text",class:"w-full h-10 px-4 border border-gray-300 rounded-lg focus:outline-none focus:border-[#6db631]",placeholder:"R$ 0,00"},null,544),[[q,s.value]])])])])])]),e("div",Y,[p(E,{class:L([s.value&&s.value>0?"bg-[#6db631]":"bg-[#6d6d6d]","w-full max-w-[200px]"]),text:"Abrir caixa",iconPath:"/storage/images/arrow_left_alt.svg",disabled:!s.value||s.value<=0,onClick:h},null,8,["class","disabled"])])])]),_:1}))}},na=M(aa,[["__scopeId","data-v-a855015b"]]);export{na as default};
