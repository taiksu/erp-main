import{d as q,j as g,i as R,e as n,o as t,a as s,c as F,f as h,w as L,t as b,n as w,u as x,z as A,O as T,q as N,C as j,P as D,p as V,F as C,h as $,b as S,N as H,R as U,k as z,Z as O,r as J}from"./app-vGR4VHCP.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"navbar"},Q={class:"navbar-content"},W={class:"navbar-left"},Z={class:"navbar-logo"},X=["href"],Y={class:"navbar-right"},ee={key:0,class:"user-info"},se=["src"],ae={class:"user-details"},ie={class:"user-name"},oe={class:"user-location"},te={key:1,class:"user-info loading"},ne={__name:"Navbar",setup(r){const e=q(null),d=g(()=>{var i;return(i=e.value)==null?void 0:i.unidade}),u=g(()=>{var i,o;return((i=e.value)==null?void 0:i.profile_photo_url)||`https://ui-avatars.com/api/?name=${_((o=e.value)==null?void 0:o.name)}&color=7F9CF5&background=EBF4FF`}),_=i=>i?i.split(" ").map(a=>a.charAt(0).toUpperCase()).join(""):"*",f=async()=>{try{const i=await fetch("/api/navbar-profile",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!i.ok)throw new Error("Erro ao carregar perfil do usuário");const o=await i.json();e.value=o.data}catch(i){console.error("Erro ao buscar perfil:",i),e.value=null}};return R(()=>{f()}),(i,o)=>(t(),n("div",K,[o[3]||(o[3]=s("div",{class:"navbar-background"},null,-1)),s("div",Q,[s("div",W,[s("div",Z,[o[1]||(o[1]=s("div",{class:"mr-4"},[s("a",{href:"https://www.taiksu.com.br/office/",target:"_blank"},[s("img",{src:"/storage/images/quadrados_verdes.svg",alt:"Quadrados verdes",class:"w-full h-full"})])],-1)),s("div",null,[s("a",{href:i.route("franqueado.painel")},o[0]||(o[0]=[s("img",{src:"/storage/images/logo_tipo_verde.svg",alt:"logo tipo verde",class:"w-full h-full"},null,-1)]),8,X)])])]),s("div",Y,[e.value?(t(),F(x(A),{key:0,href:i.route("franqueado.perfil"),class:w(["user-info",{loading:!e.value}])},{default:L(()=>{var a;return[e.value?(t(),n("div",ee,[s("img",{src:u.value,alt:"Avatar",class:"avatar"},null,8,se),s("div",ae,[s("div",ie,b(e.value.name),1),s("div",oe,b(((a=d.value)==null?void 0:a.cidade)||"Taiksu Franchising"),1)])])):(t(),n("div",te,o[2]||(o[2]=[s("div",{class:"avatar-skeleton"},null,-1),s("div",{class:"user-details-skeleton"},[s("div",{class:"name-skeleton"}),s("div",{class:"location-skeleton"})],-1)])))]}),_:1},8,["href","class"])):h("",!0)])])]))}},re=y(ne,[["__scopeId","data-v-8a82a90b"]]),le={class:"icon"},ue=["src"],ce={class:"label"},de={type:"submit",class:"w-full h-full flex items-center"},me={class:"icon"},ve=["src"],ge={class:"label"},fe={key:2,class:"submenu"},be={class:"label"},_e={__name:"MenuItem",props:{label:String,icon:String,link:String,isActive:Boolean,isLogout:Boolean,submenuItems:{type:Array,default:()=>[]},requiredPermission:String},setup(r){const e=r,d=T("userPermissions",q({})),u=q(!1),_=g(()=>u.value),f=g(()=>e.link&&/^https?:\/\//.test(e.link)),i=g(()=>f.value?e.link:e.link?route(e.link):"#"),o=g(()=>!e.requiredPermission||d.value[e.requiredPermission]),a=g(()=>e.submenuItems.filter(l=>!l.requiredPermission||d.value[l.requiredPermission])),v=l=>{a.value.length>0&&(l.preventDefault(),c())},c=()=>{u.value=!u.value,I()},m=()=>{const l=localStorage.getItem(`submenu-${e.link}`);l!==null&&(u.value=JSON.parse(l))},I=()=>{localStorage.setItem(`submenu-${e.link}`,JSON.stringify(u.value))},B=g(()=>p.value||e.isActive?"submenu-active":""),E=l=>{const P=window.location.pathname,k=new URL(route(l),window.location.origin).pathname;return P===k},p=g(()=>a.value.some(l=>E(l.link))),G=()=>{e.isLogout&&H.post(route("logout"))};return m(),N(p,()=>{p.value||j(()=>{u.value=!1,I()})}),N(u,()=>{j(()=>I())}),(l,P)=>(t(),n("div",null,[!r.isLogout&&r.link&&o.value?(t(),F(D(f.value?"a":x(A)),{key:0,class:w(["menu-item",[B.value,{active:r.isActive||p.value}]]),href:i.value,target:f.value?"_blank":null,onClick:v},{default:L(()=>[s("div",le,[s("img",{src:r.icon,alt:"icon"},null,8,ue)]),s("div",ce,b(r.label),1),a.value.length>0?(t(),n("div",{key:0,class:w(["right-icon",{"rotate-icon":_.value}])},P[0]||(P[0]=[s("img",{src:"/storage/images/arrow_drop_down.svg",alt:"arrow icon"},null,-1)]),2)):h("",!0)]),_:1},8,["class","href","target"])):r.isLogout&&o.value?(t(),n("form",{key:1,onSubmit:V(G,["prevent"]),class:"menu-item"},[s("button",de,[s("div",me,[s("img",{src:r.icon,alt:"icon"},null,8,ve)]),s("div",ge,b(r.label),1)])],32)):h("",!0),a.value.length>0&&(u.value||p.value)?(t(),n("div",fe,[(t(!0),n(C,null,$(a.value,(k,M)=>(t(),n("div",{key:M},[S(x(A),{class:w(["submenu-item",{active:E(k.link)}]),href:l.route(k.link)},{default:L(()=>[s("div",be,b(k.label),1)]),_:2},1032,["href","class"])]))),128))])):h("",!0)]))}},pe=y(_e,[["__scopeId","data-v-bed64f61"]]),ke={key:0,class:"category-title menu-categorias text-sm sm:text-base font-medium text-[#87ba73] mb-3 pl-4"},he={__name:"Slidebar",setup(r){const e=q(null),d=q({}),u=async()=>{try{const a=await z.get("/api/navbar-profile");d.value=a.data.data.permissions||{}}catch(a){console.error("Erro ao carregar permissões:",a),d.value={}}};U("userPermissions",d);const _=[{name:"",items:[{label:"Inicio",icon:"/storage/images/inicio.svg",link:"franqueado.painel",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Ferramentas",items:[{label:"E-mail",icon:"/storage/images/email.svg",link:"https://arquivos.taiksu.com.br/apps/mail/box/1",isLogout:!1,isActive:!1,requiredPermission:null},{label:"Comunidade",icon:"/storage/images/diversity_4.svg",link:"https://arquivos.taiksu.com.br/call/wprjfww7",isLogout:!1,isActive:!1,requiredPermission:null},{label:"Treinamento",icon:"/storage/images/treinamento.svg",link:"https://treinamento.taiksu.com.br/",isLogout:!1,isActive:!1,requiredPermission:null},{label:"Mídias",icon:"/storage/images/perm_media.svg",link:"https://arquivos.taiksu.com.br/s/P5nypCADKccgcib",isLogout:!1,isActive:!1,requiredPermission:null}]},{name:"Gestão da loja",items:[{label:"Gestão de estoque",icon:"/storage/images/estoque.svg",link:"franqueado.estoque",isLogout:!1,requiredPermission:"controle_estoque",submenuItems:[{label:"Inventário",link:"franqueado.inventario",requiredPermission:"controle_estoque"},{label:"Saida de estoque",link:"franqueado.controleEstoque",requiredPermission:"controle_saida_estoque"},{label:"Fornecedores",link:"franqueado.fornecedores",requiredPermission:"controle_estoque"},{label:"Novo Pedidos",link:"franqueado.pedidos",requiredPermission:"controle_estoque"},{label:"Histórico de Pedidos",link:"franqueado.historicoPedidos",requiredPermission:"controle_estoque"}],isActive:!1},{label:"Gestão de resíduos",icon:"/storage/images/delete_branco.svg",link:"franqueado.supervisaoResidos",isLogout:!1,requiredPermission:"gestao_salmao",submenuItems:[{label:"Limpeza de salmão",link:"franqueado.limpesaSalmoes",requiredPermission:"gestao_salmao"}],isActive:!1},{label:"Gestão de equipe",icon:"/storage/images/gestao_servisos.svg",link:"franqueado.gestaoEquipe",isLogout:!1,requiredPermission:"gestao_equipe",submenuItems:[{label:"Controle de ponto",icon:"/storage/images/add_product.svg",link:"franqueado.controlePonto",requiredPermission:"gestao_equipe"},{label:"Folha de pagamento",link:"franqueado.folhaPagamento",requiredPermission:"gestao_equipe"}],isActive:!1}]},{name:"Financeiro",items:[{label:"Fluxo de caixa",icon:"/storage/images/fluxo_caixa.svg",link:"franqueado.abrirCaixa",isLogout:!1,requiredPermission:"fluxo_caixa",submenuItems:[{label:"Métodos de pagamento",link:"franqueado.metodosPagamentos",requiredPermission:"fluxo_caixa"},{label:"Canais de Vendas",link:"franqueado.canaisVendas",requiredPermission:"fluxo_caixa"},{label:"Histórico de Caixa",link:"franqueado.historicoCaixa",requiredPermission:"fluxo_caixa"},{label:"Caixa Retroativo",link:"franqueado.caixaRetroativo",requiredPermission:"fluxo_caixa"}],isActive:!1},{label:"Contas a pagar",icon:"/storage/images/attach_money.svg",link:"franqueado.contasApagar",isLogout:!1,requiredPermission:"contas_pagar",submenuItems:[{label:"Histórico de Despesas",link:"franqueado.historicoContas",requiredPermission:"contas_pagar"}],isActive:!1},{label:"DRE Gerencial",icon:"/storage/images/analitic.svg",link:"franqueado.dreGerencial",isLogout:!1,requiredPermission:"dre",isActive:!1}]},{name:"",items:[{label:"Sair",icon:"/storage/images/log-out.png",link:"logout",isLogout:!0}]}],f=g(()=>_.map(a=>({...a,items:a.items.filter(v=>!v.requiredPermission||d.value[v.requiredPermission]||v.submenuItems&&v.submenuItems.some(c=>!c.requiredPermission||d.value[c.requiredPermission]))})).filter(a=>a.items.length>0));R(async()=>{await u();const a=localStorage.getItem("sidebarScrollPosition");a&&e.value&&(e.value.scrollTop=a)});const i=()=>{e.value&&localStorage.setItem("sidebarScrollPosition",e.value.scrollTop)},o=a=>{const v=window.location.pathname,c=new URL(a,window.location.origin).pathname;return v===c||v.startsWith(c)};return(a,v)=>(t(),n("div",null,[s("div",{class:"sidebar fixed top-16 left-0 bg-[#164110] text-white flex flex-col p-3 overflow-y-auto h-full sm:w-64 md:w-72 lg:w-80 xl:w-80",ref_key:"sidebar",ref:e,onScroll:i},[(t(!0),n(C,null,$(f.value,c=>(t(),n("div",{key:c.name,class:"menu-category mb-6"},[c.items.length>0?(t(),n("div",ke,b(c.name),1)):h("",!0),(t(!0),n(C,null,$(c.items,m=>(t(),F(pe,{key:m.link||"no-link",label:m.label,icon:m.icon,link:m.link,submenuItems:m.submenuItems,isActive:m.link?o(m.link):!1,isLogout:m.isLogout,requiredPermission:m.requiredPermission},null,8,["label","icon","link","submenuItems","isActive","isLogout","requiredPermission"]))),128))]))),128))],544)]))}},qe=y(he,[["__scopeId","data-v-e3fe6b6a"]]),Pe={class:"content"},we={__name:"LayoutFranqueado",props:{title:String},setup(r){return(e,d)=>(t(),n("div",null,[S(x(O),{title:r.title},null,8,["title"]),S(re),S(qe),s("main",Pe,[J(e.$slots,"default",{},void 0,!0)])]))}},Ie=y(we,[["__scopeId","data-v-d4397c97"]]);export{Ie as L};
