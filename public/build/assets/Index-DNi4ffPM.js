import{d as c,j as T,e as m,o as g,a as e,f as B,t as n,F as k,h as M,n as A,m as $,U as j,i as V,c as I,w as N,b as R,u as U,Z as z,x as H,k as W}from"./app-vGR4VHCP.js";import{L as q}from"./LayoutFranqueado-Dg4kLBEk.js";import{C as E,A as G,p as Q,a as Z,D as J,P as K,B as X,L as ee,R as te,b as se,c as ae,d as oe,e as le,f as ne,g as re,h as ie,i as de}from"./chart-D2B5U74o.js";import{p as ce}from"./chartjs-plugin-datalabels.esm-EXrChiyj.js";import{d as y}from"./dayjs.min-CqG6kpIn.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"relative"},ge={key:0},me={key:0,class:"absolute z-10 bg-white border rounded-xl shadow-lg w-[300px] p-4 left-[68px] transform -translate-x-1/2"},fe={class:"flex justify-between items-center mb-3"},xe={class:"font-semibold flex items-center"},ve={class:"ml-[90px]"},be={class:"grid grid-cols-7 gap-1 text-center text-sm"},he=["onClick"],_e={class:"mt-5"},ye={class:"flex items-center space-x-4"},Fe={class:"flex items-center"},Ce={class:"flex items-center"},we={__name:"CalendarFilterDia",setup(P,{emit:F}){const C=F,b=c(!1),u=c(y()),p=c(y()),x=c(y()),r=c(!0),_=["D","S","T","Q","Q","S","S"],S=T(()=>{const a=[],l=u.value.startOf("month"),d=p.value.endOf("month");for(let v=0;v<l.day();v++)a.push({day:"",date:null});for(let v=1;v<=d.date();v++){const O=l.date(v);a.push({day:v,date:O})}return a}),i=c(""),Y=()=>{x.value=x.value.subtract(1,"month")},w=()=>{x.value=x.value.add(1,"month")},D=a=>a&&(a.isSame(u.value)||a.isSame(p.value)),o=a=>!a||!u.value||!p.value?!1:a.isAfter(u.value,"day")&&a.isBefore(p.value,"day"),t=a=>{a&&(r.value?(u.value=a.startOf("day"),r.value=!1):(p.value=a.endOf("day"),r.value=!0))},s=()=>{L(),b.value=!1},h=()=>{b.value=!b.value},f=()=>{const a=u.value.format("DD-MM-YYYY"),l=p.value.format("DD-MM-YYYY");console.log("Data inicial:",a),console.log("Data final:",l),console.log("Categoria:",i.value),C("update-filters",{startDate:a,endDate:l,periodo:i.value}),b.value=!1},L=()=>{u.value=y(),p.value=y(),i.value=""};return(a,l)=>(g(),m("div",pe,[e("div",{class:"flex items-center justify-between p-3 rounded-md cursor-pointer",onClick:h},[e("span",null,[u.value&&p.value?(g(),m("span",ge,n(u.value.format("DD/MM/YYYY"))+" - "+n(p.value.format("DD/MM/YYYY")),1)):B("",!0)])]),b.value?(g(),m("div",me,[e("div",fe,[e("button",{onClick:Y,class:"p-2 rounded hover:bg-gray-300"}," < "),e("span",xe,[e("span",null,n(x.value.format("MMM")),1),e("span",ve,n(x.value.format("YYYY")),1)]),e("button",{onClick:w,class:"p-2 rounded hover:bg-gray-300"}," > ")]),e("div",be,[(g(),m(k,null,M(_,d=>e("div",{class:"font-semibold text-gray-600",key:d},n(d),1)),64)),(g(!0),m(k,null,M(S.value,(d,v)=>(g(),m("div",{key:v,onClick:O=>t(d.date),class:A(["p-2 rounded-full cursor-pointer",D(d.date)?"bg-[#6db631] text-white":o(d.date)?"bg-[#b3dca6]":"hover:bg-gray-200"])},n(d.day),11,he))),128))]),e("div",_e,[e("div",ye,[e("div",Fe,[$(e("input",{type:"radio",id:"almoco",value:"almoco","onUpdate:modelValue":l[0]||(l[0]=d=>i.value=d),class:A(["mr-2",{"text-[#6db631]":i.value==="almoco","border-[#6db631]":i.value==="almoco"}])},null,2),[[j,i.value]]),l[2]||(l[2]=e("label",{for:"almoco",class:"text-sm"},"Almoço",-1))]),e("div",Ce,[$(e("input",{type:"radio",id:"janta",value:"janta","onUpdate:modelValue":l[1]||(l[1]=d=>i.value=d),class:A(["mr-2",{"text-[#6db631]":i.value==="janta","border-[#6db631]":i.value==="janta"}])},null,2),[[j,i.value]]),l[3]||(l[3]=e("label",{for:"janta",class:"text-sm"},"Janta",-1))])])]),e("div",{class:"w-full mt-4 flex justify-between items-center"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:L}," Limpar "),e("div",{class:"flex gap-2"},[e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:s}," Cancelar "),e("div",{class:"h-10 rounded-full flex justify-center items-center px-3 py-2.5 cursor-pointer text-[#6db631] text-[15px] font-semibold font-['Figtree'] leading-tight",onClick:f}," OK ")])])])):B("",!0)]))}},De={class:"flex justify-between items-center mb-4"},ke={class:"text-[#262a27] text-[15px] font-semibold font-['Figtree'] leading-tight"},Me={class:"flex items-center space-x-2"},Se={class:"text-gray-900 text-[17px] font-semibold"},Ye={class:"mt-5"},Ae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-6"},Be={class:"bg-white rounded-lg px-12 py-8"},$e={class:"w-full"},Le={class:"py-3 flex items-center gap-5"},Oe=["src","alt"],je={class:"text-[#262a27] text-[17px] font-semibold font-['Figtree'] leading-snug"},Re={class:"py-3 text-right text-[#262a27] font-semibold"},Ee={class:"w-full h-[60px] bg-[#d2fac3] rounded-bl-[10px] rounded-br-[10px] px-12 flex justify-between items-center"},Pe={class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"},Te={class:"bg-white rounded-lg px-12 py-8"},Ve={class:"mb-4 text-center"},Ie={class:"mt-8"},Ne={class:"bg-white rounded-lg shadow"},Ue={ref:"scrollContainer",class:"overflow-y-auto max-h-96 scroll-hidden"},ze={class:"space-y-2"},He={class:"flex items-center text-gray-900 font-semibold"},We=["src"],qe={class:"text-center text-gray-900 font-semibold"},Ge={class:"text-left text-gray-900 font-medium"},Qe={class:"text-center text-gray-600 font-semibold"},Ze={class:"text-center text-gray-500 font-semibold"},Je={__name:"Index",setup(P){E.register(G,Q,Z,J,K,X,ee,te,se,ae,oe,le,ne,re,ie,de,ce);const F=c([]),C=c(""),b=c([]),u=c([]),p=c([]),x=c([]),r=c("pie");let _=null;const S=o=>{switch(o){case"abertura":case"suprimento":return"/storage/images/arrow_back_verde.svg";case"fechamento":return"/storage/images/thumb_up.svg";case"sangria":return"/storage/images/arrow_back_red.svg";default:return""}},i=o=>{switch(o){case"abertura":return"Abertura";case"fechamento":return"Fechamento";case"suprimento":return"Suprimento";case"sangria":return"Sangria";default:return""}},Y=o=>{console.log("Filtros atualizados:",o),w(o.startDate,o.endDate,o.periodo)},w=async(o,t,s)=>{try{const f=(await W.get("/api/analyticos/lista-metodos-pagamentos",{params:{start_date:o,end_date:t,periodo:s||"total"}})).data;F.value=f.metodos,b.value=f.historico,C.value=f.total,p.value=f.grafico.labels,u.value=f.grafico.data,x.value=f.grafico.porcentagem,D()}catch(h){console.error("Erro ao buscar dados:",h)}},D=()=>{const o=document.getElementById("myChart").getContext("2d");_&&_.destroy();const t={type:r.value,data:{labels:p.value,datasets:[{data:u.value,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#F7464A","#FF7F50"],borderColor:r.value==="line"?"#36A2EB":void 0,borderWidth:r.value==="line"||r.value==="bar"?1:0,fill:r.value==="line"}]},options:{plugins:{tooltip:{callbacks:{label:function(s){const h=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s.raw),f=x.value[s.dataIndex];return`${s.label}: ${h} (${f})`}}},legend:{position:"bottom",labels:{usePointStyle:!0,padding:15,boxWidth:10}},datalabels:{display:!1}},scales:r.value==="bar"||r.value==="line"?{x:{type:"category"},y:{beginAtZero:!0,ticks:{callback:function(s){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s)}}}}:void 0}};_=new E(o,t)};return V(()=>{w()}),(o,t)=>(g(),I(q,null,{default:N(()=>[R(U(z),{title:"Histórico de Caixa"}),e("div",De,[t[2]||(t[2]=e("div",null,[e("div",{class:"painel-title text-2xl sm:text-3xl md:text-4xl"}," Histórico de Caixa "),e("div",{class:"painel-subtitle"},[e("p",{class:"text-sm sm:text-base md:text-lg"}," Acompanhe seu negócio em tempo real ")])],-1)),e("div",ke,[e("div",Me,[t[1]||(t[1]=e("img",{src:"/storage/images/calendar_month.svg",alt:"Filtro",class:"w-5 h-5"},null,-1)),e("span",Se,[R(we,{onUpdateFilters:Y})])])])]),e("div",Ye,[e("div",Ae,[e("div",null,[e("div",Be,[e("table",$e,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-gray-500 text-left text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Método de pagamento "),e("th",{class:"text-gray-500 text-right text-sm sm:text-base md:text-lg font-semibold font-['Figtree'] leading-snug"}," Valor ")])],-1)),e("tbody",null,[(g(!0),m(k,null,M(F.value,s=>(g(),m("tr",{key:s.nome},[e("td",Le,[s.img_icon?(g(),m("img",{key:0,src:`/${s.img_icon}`,alt:s.nome,class:"w-8 h-8"},null,8,Oe)):B("",!0),e("div",je,n(s.nome),1)]),e("td",Re,n(s.valor),1)]))),128))])])]),e("div",Ee,[t[4]||(t[4]=e("div",{class:"text-[#1d5915] text-xl font-bold font-['Figtree'] leading-snug"}," TOTAL ",-1)),e("div",Pe,n(C.value),1)])]),e("div",null,[e("div",Te,[e("div",Ve,[t[6]||(t[6]=e("label",{for:"chartType",class:"text-gray-700 font-semibold mr-2"}," Tipo de Gráfico: ",-1)),$(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onChange:D,id:"chartType",class:"border rounded px-2 py-1"},t[5]||(t[5]=[e("option",{value:"pie"},"Pizza (Pie)",-1),e("option",{value:"doughnut"},"Rosquinha (Doughnut)",-1),e("option",{value:"bar"},"Barras (Bar)",-1),e("option",{value:"line"},"Linha (Line)",-1),e("option",{value:"radar"},"Radar",-1),e("option",{value:"polarArea"},"Área Polar (Polar Area)",-1)]),544),[[H,r.value]])]),t[7]||(t[7]=e("canvas",{id:"myChart"},null,-1))])])])]),e("div",Ie,[t[9]||(t[9]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-[#262a27] text-[17px] mb-[-13px] font-semibold font-['Figtree'] leading-snug"}," Histórico de Movimentações "),e("div",{class:"flex items-center space-x-2"},[e("img",{src:"/storage/images/filter_alt.svg",alt:"Filtro",class:"w-5 h-5"})])],-1)),e("div",Ne,[t[8]||(t[8]=e("div",{class:"bg-[#164110] grid grid-cols-5 gap-4 py-4 px-6 text-xs font-semibold text-[#FFFFFF] uppercase tracking-wider rounded-tl-2xl rounded-tr-2xl"},[e("span",{class:"text-left px-5"},"OPERAÇÃO"),e("span",{class:"text-center"},"VALOR"),e("span",{class:"text-left"},"DATA/HORA"),e("span",{class:"text-center"},"MOTIVO"),e("span",{class:"text-center"},"RESPONSÁVEL")],-1)),e("div",Ue,[e("ul",ze,[(g(!0),m(k,null,M(b.value,s=>(g(),m("li",{key:s.hora,class:"hover:bg-gray-200 grid grid-cols-5 gap-2 px-6 py-3 text-[16px]"},[e("span",He,[e("img",{src:S(s.operacao),alt:"icon",class:"mr-3 w-5 h-5"},null,8,We),e("span",null,n(i(s.operacao)),1)]),e("span",qe,n(s.valor),1),e("span",Ge,n(s.hora),1),e("span",Qe,n(s.motivo),1),e("span",Ze,n(s.responsavel),1)]))),128))])],512)])])]),_:1}))}},ot=ue(Je,[["__scopeId","data-v-dd2c31ff"]]);export{ot as default};
